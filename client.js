var _0x45937f=_0x4916;(function(_0x4a3455,_0x346cd3){var _0x4766bd=_0x4916,_0x44cec3=_0x4a3455();while(!![]){try{var _0x333dad=parseInt(_0x4766bd(0x1b2))/0x1+parseInt(_0x4766bd(0x1a6))/0x2*(-parseInt(_0x4766bd(0x149))/0x3)+parseInt(_0x4766bd(0x190))/0x4*(parseInt(_0x4766bd(0x141))/0x5)+parseInt(_0x4766bd(0x16c))/0x6+parseInt(_0x4766bd(0x194))/0x7+parseInt(_0x4766bd(0x13a))/0x8*(-parseInt(_0x4766bd(0x1ae))/0x9)+-parseInt(_0x4766bd(0x154))/0xa*(parseInt(_0x4766bd(0x1a1))/0xb);if(_0x333dad===_0x346cd3)break;else _0x44cec3['push'](_0x44cec3['shift']());}catch(_0x2e59c5){_0x44cec3['push'](_0x44cec3['shift']());}}}(_0x5779,0xe6305),inputSeqId=0x0,pendingInputs=new Queue(MAX_QUEUE_SIZE),Resource={},Resource['pngMap']={},Resource[_0x45937f(0x17b)]={},Resource[_0x45937f(0x167)]=0x0,Resource[_0x45937f(0x179)]=0x0,Resource['onReady']=null,Resource[_0x45937f(0x1aa)]=function(_0x576a2a){var _0x29bd6e=_0x45937f;_0x576a2a[_0x29bd6e(0x189)](function(_0xd8bb55){var _0x20b498=_0x29bd6e,_0x76553b=_0xd8bb55[0x0],_0x34aa7c=_0xd8bb55[0x1],_0xd72088=_0xd8bb55[0x2],_0x457ec8=_0xd8bb55[0x3],_0x323ed4=new Audio(_0x34aa7c);_0x323ed4[_0x20b498(0x13e)]=_0xd72088,_0x323ed4['loop']=_0x457ec8,Resource[_0x20b498(0x17b)][_0x76553b]=_0x323ed4;});},Resource[_0x45937f(0x16f)]=function(_0x1c1751,_0x1cea2f){var _0x5954d5=_0x45937f;Resource['pngNum']+=_0x1c1751[_0x5954d5(0x1b5)],Resource[_0x5954d5(0x18c)]=_0x1cea2f,_0x1c1751['forEach'](function(_0xa5fc91){var _0x37268e=_0x5954d5,_0x2ebfe4=_0xa5fc91[0x0],_0x4ce317=_0xa5fc91[0x1],_0x34ff52=new Image();_0x34ff52[_0x37268e(0x14b)]=function(){var _0x3140e0=_0x37268e;Resource[_0x3140e0(0x184)][_0x2ebfe4]=_0x34ff52,Resource[_0x3140e0(0x179)]++;if(Resource['pngNow']==Resource[_0x3140e0(0x167)])Resource[_0x3140e0(0x18c)]();},Resource[_0x37268e(0x184)][_0x2ebfe4]=![],_0x34ff52['src']=_0x4ce317;});},Resource[_0x45937f(0x152)]=function(_0x5e0a10){return Resource['pngMap'][_0x5e0a10];},Resource[_0x45937f(0x13b)]=function(_0x34734e){var _0x4c1fa3=_0x45937f;Resource[_0x4c1fa3(0x17b)][_0x34734e][_0x4c1fa3(0x157)]=0x0;var _0x1f9d10=Resource[_0x4c1fa3(0x17b)][_0x34734e]['play']();_0x1f9d10!=undefined&&_0x1f9d10[_0x4c1fa3(0x18b)](_0x3353c5=>{})[_0x4c1fa3(0x187)](_0xc7c50b=>{});},Resource[_0x45937f(0x15c)]=function(_0x4c1e96){var _0x419bee=_0x45937f;Resource[_0x419bee(0x17b)][_0x4c1e96]['pause'](),Resource[_0x419bee(0x17b)][_0x4c1e96][_0x419bee(0x157)]=0x0;});class Sprite{constructor(_0x3e1826,_0x51c332,_0x4e063d,_0x294b5e,_0x9335a8){var _0x4d0522=_0x45937f;this[_0x4d0522(0x139)]=0x0,this[_0x4d0522(0x138)]=0x0,this['sizeX']=_0x51c332,this[_0x4d0522(0x144)]=_0x4e063d,this[_0x4d0522(0x17f)]=_0x294b5e,this[_0x4d0522(0x185)]=_0x9335a8,this[_0x4d0522(0x1b3)]=0x0,this['currTime']=0x0,this[_0x4d0522(0x155)]=0x0,this[_0x4d0522(0x1af)]=0x0,this['currStageTime']=0x0,this['stageTime']=0x0,this[_0x4d0522(0x18e)]=0x0,this[_0x4d0522(0x1a7)]=0x0,this[_0x4d0522(0x158)]=[],this[_0x4d0522(0x13c)]=[],this[_0x4d0522(0x1ad)]=_0x3e1826,this['oneTime']=![];}[_0x45937f(0x17a)](_0x3e3be3,_0x10b360,_0x3cf1db){var _0x593d14=_0x45937f;_0x10b360=_0x10b360+(UNIT>>0x1)-(this['sizeDrawX']>>0x1),_0x3cf1db=_0x3cf1db+(UNIT>>0x1)-(this[_0x593d14(0x185)]>>0x1),this['renderWith'](_0x3e3be3,_0x10b360,_0x3cf1db);}[_0x45937f(0x175)](_0xb86a33,_0xc2a6df,_0x59ca8e,_0x6f7316,_0x4e64ba){var _0x2f6d7c=_0x45937f;if(this[_0x2f6d7c(0x164)]&&this[_0x2f6d7c(0x155)]+0x1==this[_0x2f6d7c(0x1af)]&&this[_0x2f6d7c(0x18e)]+0x1==this[_0x2f6d7c(0x1a7)])return;ctx[_0x2f6d7c(0x16a)](Resource[_0x2f6d7c(0x152)](this['type']),typeof _0x6f7316==_0x2f6d7c(0x197)?this[_0x2f6d7c(0x139)]:_0x6f7316,typeof _0x4e64ba=='undefined'?this['startY']:_0x4e64ba,this[_0x2f6d7c(0x19c)],this['sizeY'],_0xc2a6df,_0x59ca8e,this[_0x2f6d7c(0x17f)],this[_0x2f6d7c(0x185)]);}['updateDir'](_0x37b408){var _0x16244a=_0x45937f;this[_0x16244a(0x13c)][_0x16244a(0x1b5)]&&(this['startY']=this[_0x16244a(0x144)]*this[_0x16244a(0x13c)][_0x37b408]);}['update'](_0xb27578){var _0xc4c3a7=_0x45937f;this[_0xc4c3a7(0x15d)]+=_0xb27578,this[_0xc4c3a7(0x19f)]+=_0xb27578,this[_0xc4c3a7(0x15d)]>=this[_0xc4c3a7(0x1b3)]&&(this[_0xc4c3a7(0x15d)]=0x0,this[_0xc4c3a7(0x155)]=(this[_0xc4c3a7(0x155)]+0x1)%this[_0xc4c3a7(0x1af)],this[_0xc4c3a7(0x139)]=this[_0xc4c3a7(0x19c)]*this[_0xc4c3a7(0x155)]),this[_0xc4c3a7(0x1a7)]&&this[_0xc4c3a7(0x19f)]>=this[_0xc4c3a7(0x1a4)]&&(this[_0xc4c3a7(0x19f)]=0x0,this['currTime']=0x0,this['currCycle']=0x0,this['currStage']=(this[_0xc4c3a7(0x18e)]+0x1)%this[_0xc4c3a7(0x1a7)],this[_0xc4c3a7(0x1af)]=this['stageCycles'][this[_0xc4c3a7(0x18e)]],this[_0xc4c3a7(0x138)]+=this[_0xc4c3a7(0x138)]);}}class Entity{constructor(){var _0x4c4459=_0x45937f;this[_0x4c4459(0x18a)]=null,this['state']=null,this['frameCtr']=0x0,this[_0x4c4459(0x162)]=new Queue(FRAME_RATE);}[_0x45937f(0x17a)](_0x54c17e,_0x418b37,_0xc7277a){var _0x17b35c=_0x45937f;this[_0x17b35c(0x18a)][_0x17b35c(0x17a)](_0x54c17e,_0x418b37,_0xc7277a);}['renderWith'](_0x5b9ec5,_0x21508a,_0x4735de,_0x339b57,_0x286e60){var _0x1b576b=_0x45937f;this[_0x1b576b(0x18a)][_0x1b576b(0x175)](_0x5b9ec5,_0x21508a,_0x4735de,_0x339b57,_0x286e60);}[_0x45937f(0x173)](_0x164d6d,_0x529401){var _0x252033=_0x45937f;this[_0x252033(0x18a)][_0x252033(0x173)](_0x164d6d);typeof _0x529401==_0x252033(0x197)&&this[_0x252033(0x18f)]&&this['state'][_0x252033(0x173)](_0x164d6d);var _0xd02931=this[_0x252033(0x14f)]++-FRAME_RATE/SERVER_FRAME;while(this[_0x252033(0x162)]['length']()>=0x2&&this['buffer']['peekSecond']()['ts']<=_0xd02931){this['buffer'][_0x252033(0x19d)]();}if(this[_0x252033(0x162)][_0x252033(0x1b5)]()>=0x2){var _0x1cf49e=this[_0x252033(0x162)]['peek'](),_0x11f8f8=this['buffer'][_0x252033(0x145)]();if(_0x1cf49e['ts']<=_0xd02931&&_0xd02931<=_0x11f8f8['ts']){var _0x18a14f=_0x1cf49e['x'],_0x2b8199=_0x11f8f8['x'],_0x49242b=_0x1cf49e['y'],_0x2038d3=_0x11f8f8['y'],_0x1884f5=_0x1cf49e['ts'],_0x2e1ee0=_0x11f8f8['ts'];this[_0x252033(0x18f)]['x']=_0x18a14f+(_0x2b8199-_0x18a14f)*(_0xd02931-_0x1884f5)/(_0x2e1ee0-_0x1884f5),this[_0x252033(0x18f)]['y']=_0x49242b+(_0x2038d3-_0x49242b)*(_0xd02931-_0x1884f5)/(_0x2e1ee0-_0x1884f5);var _0x2a878e=this[_0x252033(0x18f)][_0x252033(0x195)],_0x352950=this[_0x252033(0x18f)][_0x252033(0x160)];this['state'][_0x252033(0x195)]=getRowID(this[_0x252033(0x18f)]['y']),this[_0x252033(0x18f)][_0x252033(0x160)]=getColID(this['state']['x']),typeof _0x529401!=_0x252033(0x197)&&_0x529401(_0x2a878e,_0x352950,this[_0x252033(0x18f)][_0x252033(0x195)],this[_0x252033(0x18f)]['colId']);}}}}class Block extends Entity{constructor(_0x354a60,_0x348e1b){var _0x5930b6=_0x45937f;super(),this['sprite']=new Sprite(types['entity']['block'],UNIT,UNIT,UNIT,UNIT),this['sprite'][_0x5930b6(0x1b3)]=-0x1,this[_0x5930b6(0x18a)][_0x5930b6(0x1af)]=0x1;}}var blockMatrix;class Stone extends Entity{constructor(_0x234bc1,_0x299428){var _0x261107=_0x45937f;super(),this[_0x261107(0x18a)]=new Sprite(types[_0x261107(0x1a8)][_0x261107(0x1a2)],0x40,0x4f,UNIT,UNIT*1.23),this[_0x261107(0x18a)]['cycleTime']=-0x1,this[_0x261107(0x18a)]['maxCycle']=0x1;}}class Box extends Entity{constructor(_0x21613e,_0x4cac7f,_0xdcc80b){var _0x5269c5=_0x45937f;super(),this['state']=new BoxState(_0x21613e,_0x4cac7f,_0xdcc80b),this[_0x5269c5(0x18a)]=new Sprite(types[_0x5269c5(0x1a8)][_0x5269c5(0x15e)],0x40,0x4f,UNIT,UNIT*1.23),this[_0x5269c5(0x18a)]['cycleTime']=-0x1,this[_0x5269c5(0x18a)][_0x5269c5(0x1af)]=0x1;}}function _0x4916(_0x2a90ac,_0x5c60b2){var _0x5779de=_0x5779();return _0x4916=function(_0x491661,_0x10ff50){_0x491661=_0x491661-0x138;var _0x527673=_0x5779de[_0x491661];return _0x527673;},_0x4916(_0x2a90ac,_0x5c60b2);}class Loot extends Entity{constructor(_0x1927e2,_0x2ee73e,_0x579901,_0x55ccc8){var _0x1cd65d=_0x45937f;super(),this[_0x1cd65d(0x18f)]=new EntityState(_0x1927e2,_0x2ee73e,_0x579901),this[_0x1cd65d(0x18a)]=new Sprite(types[_0x1cd65d(0x1a8)][_0x1cd65d(0x169)],0x20,0x30,UNIT,UNIT*1.5),this[_0x1cd65d(0x18a)][_0x1cd65d(0x1b3)]=INFINITE,this[_0x1cd65d(0x18a)][_0x1cd65d(0x1af)]=0x1;}}function _0x5779(){var _0x1dad1b=['wave','player3','keys','getElementById','sizeX','shift','explode','currStageTime','addEventListener','145090DLYcKU','stone','justPut','stageTime','createTime','128474WKeUdC','maxStage','entity','assign','loadSnds','len','ship','type','783NpAjlx','maxCycle','translate','resident.m4a','474250PgXqeK','cycleTime','left','length','bg.ogg','startY','startX','95848FvIrOy','playSnd','frameVector','style','volume','keyCode','revivePlayer','5dfjQTD','volatile','opcode','sizeY','peekSecond','keydown','player4','pickup_loot','78NPIGtg','stone.png','onload','down','wave.png','block.png','frameCtr','getContext','right','getPng','canvas','40ZNUHbF','currCycle','direction','currentTime','stageCycles','position','space','ws://node-pop.herokuapp.com','pauseSnd','currTime','box','width','colId','char3.png','buffer','dir','oneTime','move','player','pngNum','seqId','loot','drawImage','char2.png','5935806qWQbzB','downPlayer','keyup','loadPngs','maxBombNumber','applyInput','spacePressed','update','loot.png','renderWith','sprites','ttl','key','pngNow','render','sndMap','player_downed','downed','put_bomb','sizeDrawX','score','speed','emit','player2','pngMap','sizeDrawY','push','catch','playerNum','forEach','sprite','then','onReady','block','currStage','state','3848932oXCwYa','empty','bomb.png','sound','8976366CteSwE','rowId','updateDir','undefined'];_0x5779=function(){return _0x1dad1b;};return _0x5779();}loots={};class Player extends Entity{constructor(_0x217759,_0x37131b,_0x46dcf1,_0x174d3d,_0x385334){var _0x1d599d=_0x45937f;super(),this[_0x1d599d(0x18f)]=new PlayerState(_0x217759,_0x37131b,_0x46dcf1,_0x174d3d,_0x385334),this[_0x1d599d(0x18a)]=new Sprite(playerNumToType[_0x385334],0x60,0x76,0x60,0x76),this[_0x1d599d(0x18a)][_0x1d599d(0x1af)]=0x4,this[_0x1d599d(0x18a)]['frameVector']=[0x0,0x1,0x2,0x0,0x3],this[_0x1d599d(0x18a)]['cycleTime']=0xaa,this[_0x1d599d(0x18f)]['dir']=types[_0x1d599d(0x163)][_0x1d599d(0x14c)],this[_0x1d599d(0x172)]=![];}[_0x45937f(0x16d)](){var _0x25cee6=_0x45937f;this[_0x25cee6(0x18f)][_0x25cee6(0x16d)](),this[_0x25cee6(0x18a)]=new Sprite(types[_0x25cee6(0x1a8)][_0x25cee6(0x17c)],0x4b,0x52,0x60,0x76),this[_0x25cee6(0x18a)][_0x25cee6(0x1b3)]=0xc8,this[_0x25cee6(0x18a)][_0x25cee6(0x1af)]=0x4;}[_0x45937f(0x140)](){var _0x58c268=_0x45937f;this[_0x58c268(0x18f)][_0x58c268(0x140)](),this[_0x58c268(0x18a)]=new Sprite(playerNumToType[this[_0x58c268(0x18f)][_0x58c268(0x188)]],0x60,0x76,0x60,0x76),this[_0x58c268(0x18a)]['frameVector']=[0x0,0x1,0x2,0x0,0x3],this[_0x58c268(0x18a)][_0x58c268(0x1b3)]=0xaa,this['sprite']['maxCycle']=0x4;}[_0x45937f(0x171)](_0x4f92b4){var _0x373348=_0x45937f;this[_0x373348(0x18f)][_0x373348(0x171)](_0x4f92b4,![]);}[_0x45937f(0x173)](_0xcbd569){var _0x2b8800=_0x45937f;super[_0x2b8800(0x173)](_0xcbd569),this[_0x2b8800(0x18a)][_0x2b8800(0x196)](this['state'][_0x2b8800(0x163)]);if(this[_0x2b8800(0x18f)]['id']!=localPlayerId)return;var _0x497694={};if(keyPressed[types[_0x2b8800(0x178)]['up']])_0x497694[_0x2b8800(0x178)]=types['key']['up']<<0x1;else{if(keyPressed[types['key']['right']])_0x497694[_0x2b8800(0x178)]=types[_0x2b8800(0x178)][_0x2b8800(0x151)]<<0x1;else{if(keyPressed[types[_0x2b8800(0x178)][_0x2b8800(0x14c)]])_0x497694[_0x2b8800(0x178)]=types[_0x2b8800(0x178)][_0x2b8800(0x14c)]<<0x1;else keyPressed[types[_0x2b8800(0x178)][_0x2b8800(0x1b4)]]&&(_0x497694['key']=types['key'][_0x2b8800(0x1b4)]<<0x1);}}var _0x286d9c=!this[_0x2b8800(0x172)]&&keyPressed[types[_0x2b8800(0x178)][_0x2b8800(0x15a)]];this['spacePressed']=keyPressed[types[_0x2b8800(0x178)][_0x2b8800(0x15a)]];!this['state'][_0x2b8800(0x17d)]&&_0x286d9c&&(_0x497694['key']=_0x2b8800(0x178)in _0x497694?_0x497694['key']|0x1:0x1);if(_0x2b8800(0x178)in _0x497694){_0x497694['seqId']=inputSeqId++,server[_0x2b8800(0x142)][_0x2b8800(0x182)]('opcode',{'o':types[_0x2b8800(0x143)][_0x2b8800(0x165)],'i':_0x497694});var _0x277559=Object[_0x2b8800(0x1a9)]({},_0x497694);_0x277559['delta']=_0xcbd569,this[_0x2b8800(0x171)](_0x277559),pendingInputs[_0x2b8800(0x186)](_0x277559);}}}localPlayerId='',playerNumToType=[types['entity'][_0x45937f(0x166)],types[_0x45937f(0x1a8)][_0x45937f(0x183)],types[_0x45937f(0x1a8)][_0x45937f(0x199)],types[_0x45937f(0x1a8)]['player4']];class Bomb extends Entity{constructor(_0x1033a8,_0xe62175,_0x545927){var _0x26a453=_0x45937f;super(),this[_0x26a453(0x18a)]=new Sprite(types['entity']['bomb'],0x40,0x40,0x58,0x58),this[_0x26a453(0x18a)][_0x26a453(0x1b3)]=0x190,this['sprite']['maxCycle']=0x3,this[_0x26a453(0x18f)]=new BombState(_0x1033a8,_0xe62175,_0x545927,0x0,0x0,UNIT),this[_0x26a453(0x162)]=new Queue(FRAME_RATE);}[_0x45937f(0x173)](_0x5135da){var _0x25629d=_0x45937f;this[_0x25629d(0x18a)]['update'](_0x5135da),super['update'](_0x5135da,(_0x13c73a,_0x4436fb,_0x2f5b15,_0x205e4f)=>{var _0x26313a=_0x25629d;bombMatrix[_0x13c73a][_0x4436fb]=0x0,bombMatrix[_0x2f5b15][_0x205e4f]=this[_0x26313a(0x18f)]['id'];});}}class Wave extends Entity{constructor(_0x273222,_0x33b2b9,_0x3314f7,_0x23336e,_0x5a9a16){var _0x3ca235=_0x45937f;super(),this['state']=new EntityState(_0x273222,0x0,0x0),this['id']=_0x273222,this[_0x3ca235(0x195)]=_0x33b2b9,this[_0x3ca235(0x160)]=_0x3314f7,this[_0x3ca235(0x163)]=_0x23336e,this['len']=_0x5a9a16,this['sprites']=[],this[_0x3ca235(0x1a5)]=0x0,this[_0x3ca235(0x177)]=FRAME_RATE;var _0x6307f7=new Sprite(types[_0x3ca235(0x1a8)]['wave'],0x3d,0x3d,UNIT,UNIT);_0x6307f7[_0x3ca235(0x1b3)]=0x14,_0x6307f7[_0x3ca235(0x1af)]=0x2,_0x6307f7['i']=_0x33b2b9,_0x6307f7['j']=_0x3314f7,_0x6307f7['startY']=0x3d,_0x6307f7[_0x3ca235(0x1a4)]=0x1f4,_0x6307f7[_0x3ca235(0x1a7)]=0x2,_0x6307f7[_0x3ca235(0x158)]=[_0x6307f7[_0x3ca235(0x1af)],0x9],_0x6307f7[_0x3ca235(0x164)]=!![],this[_0x3ca235(0x176)][_0x3ca235(0x186)](_0x6307f7);var _0x49827a=[[-0x1,0x0],[0x0,0x1],[0x1,0x0],[0x0,-0x1]];this['direction']=_0x49827a[_0x23336e-0x1];}[_0x45937f(0x173)](_0x102c59){var _0x527318=_0x45937f;this[_0x527318(0x1a5)]++;var _0x577e21=this[_0x527318(0x176)][_0x527318(0x1b5)];if(_0x577e21<this[_0x527318(0x1ab)]){var _0x3b51eb=new Sprite(types[_0x527318(0x1a8)][_0x527318(0x198)],0x3d,0x3d,UNIT,UNIT);_0x3b51eb[_0x527318(0x1b3)]=0x14,_0x3b51eb[_0x527318(0x1af)]=0x2;var _0x316fbc=this['sprites'][_0x577e21-0x1];_0x3b51eb['i']=_0x316fbc['i']+this['direction'][0x0],_0x3b51eb['j']=_0x316fbc['j']+this[_0x527318(0x156)][0x1],_0x3b51eb['startY']=0x3d,_0x3b51eb[_0x527318(0x1a4)]=0x1f4,_0x3b51eb[_0x527318(0x1a7)]=0x2,_0x3b51eb[_0x527318(0x158)]=[_0x3b51eb[_0x527318(0x1af)],0x9],_0x3b51eb['oneTime']=!![],this[_0x527318(0x176)][_0x527318(0x186)](_0x3b51eb);}for(var _0x14f4ac in this[_0x527318(0x176)]){var _0x3d83d8=this[_0x527318(0x176)][_0x14f4ac];if(_0x3d83d8[_0x527318(0x18e)]==0x1&&_0x3d83d8[_0x527318(0x155)]==0x8)continue;this[_0x527318(0x176)][_0x14f4ac][_0x527318(0x173)](_0x102c59);}this[_0x527318(0x1a5)]==this[_0x527318(0x177)]&&delete wavesClient[this['id']];}[_0x45937f(0x17a)](_0x52a2f9){var _0x419878=_0x45937f;for(var _0x229211 in this[_0x419878(0x176)]){var _0x4b6b13=this[_0x419878(0x176)][_0x229211],_0x18712d=_0x4b6b13['j']*UNIT+(UNIT>>0x1)-(_0x4b6b13['sizeDrawX']>>0x1),_0x2dc538=_0x4b6b13['i']*UNIT+(UNIT>>0x1)-(_0x4b6b13[_0x419878(0x185)]>>0x1),_0x5dba2f=[[_0x18712d,_0x2dc538],[_0x18712d,_0x2dc538+_0x4b6b13[_0x419878(0x185)]],[_0x18712d,_0x2dc538],[_0x18712d+_0x4b6b13[_0x419878(0x17f)],_0x2dc538],[_0x18712d+_0x4b6b13[_0x419878(0x17f)],_0x2dc538+_0x4b6b13['sizeDrawY']]],_0x2cd92e=[[0x0*Math['PI']],[0x10e*Math['PI']/0xb4],[0x0*Math['PI']/0xb4],[0x5a*Math['PI']/0xb4],[0xb4*Math['PI']/0xb4]];ctx[_0x419878(0x1b0)](_0x5dba2f[this[_0x419878(0x163)]][0x0],_0x5dba2f[this[_0x419878(0x163)]][0x1]),ctx['rotate'](_0x2cd92e[this[_0x419878(0x163)]]),_0x4b6b13[_0x419878(0x175)](_0x52a2f9,0x0,0x0,undefined,_0x4b6b13[_0x419878(0x138)]),ctx['rotate'](-_0x2cd92e[this[_0x419878(0x163)]]),ctx['translate'](-_0x5dba2f[this[_0x419878(0x163)]][0x0],-_0x5dba2f[this[_0x419878(0x163)]][0x1]);}}}var ctx,score;validKeys={},validKeys[types[_0x45937f(0x178)]['up']]=0x1,validKeys[types['key']['right']]=0x1,validKeys[types[_0x45937f(0x178)][_0x45937f(0x14c)]]=0x1,validKeys[types[_0x45937f(0x178)]['left']]=0x1,validKeys[types['key'][_0x45937f(0x15a)]]=0x1,keyPressed={};var server;mapToBGM=[types[_0x45937f(0x193)][_0x45937f(0x1ac)],types[_0x45937f(0x193)]['x'],types[_0x45937f(0x193)]['resident']];function init(){var _0x3136ba=_0x45937f;document['addEventListener'](_0x3136ba(0x146),function(_0x49eff2){_0x49eff2['keyCode']in validKeys&&(keyPressed[_0x49eff2['keyCode']]=!![]);}),document[_0x3136ba(0x1a0)](_0x3136ba(0x16e),function(_0x132235){var _0x115b00=_0x3136ba;_0x132235[_0x115b00(0x13f)]in validKeys&&(keyPressed[_0x132235['keyCode']]=![]);}),initGame();var _0x46446e=io(_0x3136ba(0x15b),{'withCredentials':!![]});_0x46446e['on']('opcode',function(_0x4c5d00){var _0x47fe05=_0x3136ba;msgQueue[_0x47fe05(0x186)](_0x4c5d00);}),server=_0x46446e;}function setPlayerPosition(_0x28c63e,_0x484d82,_0x134896){var _0x2c7f2b=_0x45937f;_0x28c63e[_0x2c7f2b(0x18f)]['x']=_0x484d82,_0x28c63e['state']['y']=_0x134896,_0x28c63e[_0x2c7f2b(0x18f)]['rowId']=getRowID(_0x134896),_0x28c63e[_0x2c7f2b(0x18f)][_0x2c7f2b(0x160)]=getColID(_0x484d82);}var currentMap=0x0;function handleMessage(_0x43757d){var _0x40abad=_0x45937f;switch(_0x43757d['o']){case types[_0x40abad(0x143)]['new_player']:localPlayerId=_0x43757d['id'];case types['opcode']['new_map']:stoneMatrix=clearMatrix();var _0x360a44=maps[_0x43757d['m']];for(var _0x164896=0x0;_0x164896<MAX_ROW;_0x164896++){for(var _0x109b9a=0x0;_0x109b9a<MAX_COL;_0x109b9a++){_0x360a44[_0x164896][_0x109b9a]==0x2&&(stoneMatrix[_0x164896][_0x109b9a]=0x1);}}Resource['pauseSnd'](mapToBGM[currentMap]),Resource[_0x40abad(0x13b)](mapToBGM[_0x43757d['m']]),currentMap=_0x43757d['m'];break;case types[_0x40abad(0x143)]['move']:for(var _0x4e15dd in players){var _0x51b533=![];for(var _0x109b9a in _0x43757d['p']){_0x51b533|=_0x4e15dd==_0x43757d['p'][_0x109b9a]['id'];}!_0x51b533&&delete players[_0x4e15dd];}for(var _0x164896 in _0x43757d['p']){var _0x1fd829=_0x43757d['p'][_0x164896],_0x2efcdd=intToPlayerState(_0x1fd829['s']),_0x4e15dd=_0x1fd829['id'];!(_0x4e15dd in players)&&(players[_0x4e15dd]=new Player(_0x4e15dd,_0x2efcdd['x'],_0x2efcdd['y'],UNIT,_0x2efcdd[_0x40abad(0x188)]));var _0x3c8bc8=players[_0x4e15dd];if(_0x4e15dd===localPlayerId){setPlayerPosition(_0x3c8bc8,_0x2efcdd['x'],_0x2efcdd['y']);while(!pendingInputs[_0x40abad(0x191)]()){var _0x4e41e0=pendingInputs['peek']();if(_0x4e41e0[_0x40abad(0x168)]<=_0x1fd829['aid'])pendingInputs['shift']();else break;}_0x3c8bc8[_0x40abad(0x18f)][_0x40abad(0x181)]=_0x2efcdd[_0x40abad(0x181)],pendingInputs['iterate'](_0x50e22f=>{_0x3c8bc8['applyInput'](_0x50e22f);}),_0x2efcdd[_0x40abad(0x1a3)]&&Resource[_0x40abad(0x13b)](types[_0x40abad(0x193)][_0x40abad(0x17e)]),_0x2efcdd['justPick']&&Resource[_0x40abad(0x13b)](types[_0x40abad(0x193)][_0x40abad(0x148)]);}else _0x3c8bc8[_0x40abad(0x18f)][_0x40abad(0x163)]=_0x2efcdd[_0x40abad(0x163)],_0x3c8bc8[_0x40abad(0x162)][_0x40abad(0x186)]({'ts':_0x3c8bc8[_0x40abad(0x14f)],'x':_0x2efcdd['x'],'y':_0x2efcdd['y']});_0x3c8bc8[_0x40abad(0x18f)]['score']=_0x2efcdd['score'],_0x3c8bc8['state']['currentBombNumber']=_0x2efcdd['currentBombNumber'],_0x3c8bc8[_0x40abad(0x18f)][_0x40abad(0x170)]=_0x2efcdd[_0x40abad(0x170)],!_0x3c8bc8['state'][_0x40abad(0x17d)]&&_0x2efcdd['downed']&&_0x3c8bc8['downPlayer'](),_0x3c8bc8[_0x40abad(0x18f)]['downed']&&!_0x2efcdd[_0x40abad(0x17d)]&&_0x3c8bc8[_0x40abad(0x140)]();}lootMatrix=intArrayToMatrix(_0x43757d['l']),boxMatrix=intArrayToMatrix(_0x43757d['bo']);var _0x51f6a8=Object[_0x40abad(0x19a)](wavesClient)[_0x40abad(0x1b5)],_0x17d47d=![];for(var _0x4e15dd in bombs){var _0x51b533=![];for(var _0x109b9a in _0x43757d['b']){_0x51b533|=_0x4e15dd==_0x43757d['b'][_0x109b9a]['id'];}if(!_0x51b533){_0x17d47d=!![];var _0x3e1559=bombs[_0x4e15dd];bombMatrix[_0x3e1559[_0x40abad(0x18f)][_0x40abad(0x195)]][_0x3e1559[_0x40abad(0x18f)]['colId']]=0x0,delete bombs[_0x4e15dd];var _0x4e0765=new Wave(_0x51f6a8,_0x3e1559[_0x40abad(0x18f)][_0x40abad(0x195)],_0x3e1559['state'][_0x40abad(0x160)],0x0,0x0);_0x4e0765['ttl']=0x14,_0x4e0765['sprites'][0x0][_0x40abad(0x1b3)]=0x14,_0x4e0765[_0x40abad(0x176)][0x0][_0x40abad(0x1af)]=0x3,_0x4e0765[_0x40abad(0x176)][0x0][_0x40abad(0x138)]=0x0,_0x4e0765[_0x40abad(0x176)][0x0][_0x40abad(0x1a7)]=0x0,_0x4e0765[_0x40abad(0x176)][0x0][_0x40abad(0x17f)]=0x48,_0x4e0765[_0x40abad(0x176)][0x0]['sizeDrawy']=0x48,wavesClient[_0x51f6a8++]=_0x4e0765;}}_0x17d47d&&Resource['playSnd'](types[_0x40abad(0x193)][_0x40abad(0x19e)]);for(var _0x164896 in _0x43757d['b']){var _0x33ca0e=_0x43757d['b'][_0x164896],_0x2efcdd=_0x33ca0e['s'],_0x4e15dd=_0x33ca0e['id'];!(_0x4e15dd in bombs)?bombs[_0x4e15dd]=new Bomb(_0x4e15dd,_0x2efcdd>>0xa,_0x2efcdd&0x3ff):bombs[_0x4e15dd][_0x40abad(0x162)][_0x40abad(0x186)]({'ts':bombs[_0x4e15dd]['frameCtr'],'x':_0x2efcdd>>0xa,'y':_0x2efcdd&0x3ff});}for(var _0x164896 in _0x43757d['w']){var _0x5a81e0=_0x43757d['w'][_0x164896],_0x2efcdd=intToWaveState(_0x5a81e0['s']);wavesClient[_0x51f6a8]=new Wave(_0x51f6a8++,_0x2efcdd['rowId'],_0x2efcdd[_0x40abad(0x160)],_0x2efcdd[_0x40abad(0x163)],_0x2efcdd[_0x40abad(0x1ab)]);}break;}}var block=new Block(0x0,0x0),stone=new Stone(0x0,0x0),box=new Box(0x0,-0x1,-0x1),loot=new Loot(0x0,-0x1,-0x1,0x0);function initGame(){var _0x4d5cc5=_0x45937f,_0x45cb6e=document['getElementById'](_0x4d5cc5(0x153));ctx=_0x45cb6e[_0x4d5cc5(0x150)]('2d'),_0x45cb6e[_0x4d5cc5(0x15f)]=WIDTH,_0x45cb6e['height']=HEIGHT,_0x45cb6e[_0x4d5cc5(0x13d)][_0x4d5cc5(0x159)]='absolute',score=document[_0x4d5cc5(0x19b)](_0x4d5cc5(0x180)),blockMatrix=new Array(MAX_ROW);for(var _0x17c67c=0x0;_0x17c67c<MAX_ROW;_0x17c67c++){blockMatrix[_0x17c67c]=new Array(MAX_COL);for(var _0x44b90c=0x0;_0x44b90c<MAX_COL;_0x44b90c++)blockMatrix[_0x17c67c][_0x44b90c]=getRandomInt(0x5);}boxMatrix=clearMatrix(),stoneMatrix=clearMatrix(),bombMatrix=clearMatrix(),lootMatrix=clearMatrix(),waveMatrix=clearMatrix(),playerMatrix=clearMatrix({});var _0x121f19=0x3e8/FRAME_RATE,_0x562c7b=function(){var _0x5cba7c=_0x4d5cc5;setTimeout(_0x562c7b,_0x121f19);while(!msgQueue[_0x5cba7c(0x191)]()){handleMessage(msgQueue[_0x5cba7c(0x19d)]());}update(_0x121f19);for(var _0xce56d2 in players){players[_0xce56d2][_0x5cba7c(0x173)](_0x121f19);}for(var _0xce56d2 in wavesClient){wavesClient[_0xce56d2]['update'](_0x121f19);}render(_0x121f19);};setTimeout(_0x562c7b,_0x121f19);}function render(_0x5ae856){var _0x331b76=_0x45937f;for(var _0x429b3f=0x0;_0x429b3f<MAX_ROW;_0x429b3f++){for(var _0xf5f48=0x0;_0xf5f48<MAX_COL;_0xf5f48++){block[_0x331b76(0x175)](0x0,_0xf5f48*UNIT,_0x429b3f*UNIT,blockMatrix[_0x429b3f][_0xf5f48]*block[_0x331b76(0x18a)][_0x331b76(0x19c)],0x0);}}for(var _0x429b3f in wavesClient){wavesClient[_0x429b3f][_0x331b76(0x17a)](_0x5ae856);}for(var _0x429b3f=0x0;_0x429b3f<MAX_ROW;_0x429b3f++){var _0x248b6e=[];for(var _0xf5f48=0x0;_0xf5f48<MAX_COL;_0xf5f48++){var _0x4172a7=_0xf5f48*UNIT,_0x4ef07c=_0x429b3f*UNIT;boxMatrix[_0x429b3f][_0xf5f48]&&box[_0x331b76(0x17a)](0x0,_0x4172a7,_0x4ef07c);stoneMatrix[_0x429b3f][_0xf5f48]&&stone[_0x331b76(0x17a)](0x0,_0x4172a7,_0x4ef07c);if(bombMatrix[_0x429b3f][_0xf5f48]){var _0x232c6a=bombs[bombMatrix[_0x429b3f][_0xf5f48]];bombs[bombMatrix[_0x429b3f][_0xf5f48]][_0x331b76(0x17a)](0x0,_0x232c6a['state']['x']-(UNIT>>0x1),_0x232c6a[_0x331b76(0x18f)]['y']-(UNIT>>0x1));}lootMatrix[_0x429b3f][_0xf5f48]&&(_0x4ef07c-=loot['sprite'][_0x331b76(0x185)]>>0x1,loot[_0x331b76(0x175)](0x0,_0x4172a7,_0x4ef07c,(lootMatrix[_0x429b3f][_0xf5f48]-0x1)*loot[_0x331b76(0x18a)][_0x331b76(0x19c)],0x0));for(var _0x116059 in playerMatrix[_0x429b3f][_0xf5f48]){_0x248b6e[_0x331b76(0x186)](_0x116059);}}for(var _0x116059 in _0x248b6e){var _0x38c0ba=players[_0x248b6e[_0x116059]],_0x4172a7=_0x38c0ba[_0x331b76(0x18f)]['x']-(UNIT>>0x1),_0x4ef07c=_0x38c0ba['state']['y']-(_0x38c0ba[_0x331b76(0x18a)][_0x331b76(0x185)]>>0x1);_0x38c0ba[_0x331b76(0x17a)](_0x5ae856,_0x4172a7,_0x4ef07c);}}var _0x48050e='';for(var _0x429b3f in players){_0x48050e+=players[_0x429b3f][_0x331b76(0x18f)][_0x331b76(0x180)]['toString']()+'\x20';}score['innerHTML']=_0x48050e;}Resource[_0x45937f(0x1aa)]([[types[_0x45937f(0x193)][_0x45937f(0x1ac)],_0x45937f(0x1b6),0.3,0x1],[types[_0x45937f(0x193)]['resident'],_0x45937f(0x1b1),0.3,0x1],[types[_0x45937f(0x193)]['x'],'sea.mp3',0.3,0x1],[types[_0x45937f(0x193)][_0x45937f(0x17e)],'lay.wav',0x1,0x0],[types['sound'][_0x45937f(0x19e)],'exp.wav',0x1,0x0],[types[_0x45937f(0x193)][_0x45937f(0x148)],'loot.wav',0x1,0x0]]),Resource[_0x45937f(0x16f)]([[types[_0x45937f(0x1a8)][_0x45937f(0x166)],'char4.png'],[types[_0x45937f(0x1a8)]['player2'],_0x45937f(0x16b)],[types[_0x45937f(0x1a8)][_0x45937f(0x199)],_0x45937f(0x161)],[types['entity'][_0x45937f(0x147)],'char1.png'],[types[_0x45937f(0x1a8)]['bomb'],_0x45937f(0x192)],[types['entity']['wave'],_0x45937f(0x14d)],[types[_0x45937f(0x1a8)][_0x45937f(0x18d)],_0x45937f(0x14e)],[types[_0x45937f(0x1a8)][_0x45937f(0x1a2)],_0x45937f(0x14a)],[types[_0x45937f(0x1a8)][_0x45937f(0x15e)],'box.png'],[types[_0x45937f(0x1a8)]['loot'],_0x45937f(0x174)],[types['entity'][_0x45937f(0x17c)],'down.png']],init);
