var _0x53d043=_0x306a;(function(_0x473c17,_0x3f1727){var _0x21ca00=_0x306a,_0x574c1c=_0x473c17();while(!![]){try{var _0x3b286b=parseInt(_0x21ca00(0x14f))/0x1*(-parseInt(_0x21ca00(0x12c))/0x2)+-parseInt(_0x21ca00(0x1b2))/0x3+-parseInt(_0x21ca00(0x183))/0x4*(-parseInt(_0x21ca00(0x166))/0x5)+-parseInt(_0x21ca00(0x15f))/0x6+-parseInt(_0x21ca00(0x131))/0x7+parseInt(_0x21ca00(0x164))/0x8+parseInt(_0x21ca00(0x17f))/0x9;if(_0x3b286b===_0x3f1727)break;else _0x574c1c['push'](_0x574c1c['shift']());}catch(_0x346913){_0x574c1c['push'](_0x574c1c['shift']());}}}(_0x1bee,0xd7135),inputSeqId=0x0,pendingInputs=new Queue(MAX_QUEUE_SIZE),Resource={},Resource[_0x53d043(0x157)]={},Resource[_0x53d043(0x18c)]={},Resource[_0x53d043(0x19e)]=0x0,Resource[_0x53d043(0x13a)]=0x0,Resource[_0x53d043(0x1b0)]=null,Resource['loadSnds']=function(_0x18302c){var _0x4c1e93=_0x53d043;_0x18302c[_0x4c1e93(0x162)](function(_0xea7261){var _0x5edd45=_0x4c1e93,_0x524d8b=_0xea7261[0x0],_0x2bbcd1=_0xea7261[0x1],_0x1f917a=_0xea7261[0x2],_0x3a494d=_0xea7261[0x3],_0x33b800=new Audio(_0x2bbcd1);_0x33b800[_0x5edd45(0x13f)]=_0x1f917a,_0x33b800['loop']=_0x3a494d,Resource['sndMap'][_0x524d8b]=_0x33b800;});},Resource[_0x53d043(0x18f)]=function(_0x538b9c,_0x4e5704){var _0x456efc=_0x53d043;Resource[_0x456efc(0x19e)]+=_0x538b9c[_0x456efc(0x142)],Resource[_0x456efc(0x1b0)]=_0x4e5704,_0x538b9c[_0x456efc(0x162)](function(_0x512fb8){var _0x108b14=_0x456efc,_0x2d0a88=_0x512fb8[0x0],_0x4aaa80=_0x512fb8[0x1],_0x2e8d98=new Image();_0x2e8d98[_0x108b14(0x1b1)]=function(){var _0x140ec3=_0x108b14;Resource['pngMap'][_0x2d0a88]=_0x2e8d98,Resource['pngNow']++;if(Resource[_0x140ec3(0x13a)]==Resource[_0x140ec3(0x19e)])Resource['onReady']();},Resource[_0x108b14(0x157)][_0x2d0a88]=![],_0x2e8d98['src']=_0x4aaa80;});},Resource[_0x53d043(0x146)]=function(_0x16d50c){var _0x1ec09a=_0x53d043;return Resource[_0x1ec09a(0x157)][_0x16d50c];},Resource['playSnd']=function(_0x3e6fd2){var _0x4c93d3=_0x53d043;Resource[_0x4c93d3(0x18c)][_0x3e6fd2][_0x4c93d3(0x12e)]=0x0;var _0x908210=Resource['sndMap'][_0x3e6fd2][_0x4c93d3(0x187)]();_0x908210!=undefined&&_0x908210['then'](_0x107b9f=>{})[_0x4c93d3(0x12b)](_0x1b4ffc=>{});},Resource['pauseSnd']=function(_0x2505bd){var _0x180069=_0x53d043;Resource[_0x180069(0x18c)][_0x2505bd][_0x180069(0x15c)](),Resource[_0x180069(0x18c)][_0x2505bd][_0x180069(0x12e)]=0x0;});class Sprite{constructor(_0x2c7426,_0x55908d,_0x2e5ec9,_0x3118fb,_0x2d29b5){var _0x46d0b5=_0x53d043;this['startX']=0x0,this['startY']=0x0,this[_0x46d0b5(0x153)]=_0x55908d,this[_0x46d0b5(0x14d)]=_0x2e5ec9,this[_0x46d0b5(0x15b)]=_0x3118fb,this[_0x46d0b5(0x19b)]=_0x2d29b5,this[_0x46d0b5(0x148)]=0x0,this[_0x46d0b5(0x1a7)]=0x0,this[_0x46d0b5(0x14a)]=0x0,this[_0x46d0b5(0x14e)]=0x0,this[_0x46d0b5(0x134)]=0x0,this[_0x46d0b5(0x199)]=0x0,this[_0x46d0b5(0x1a5)]=0x0,this['maxStage']=0x0,this[_0x46d0b5(0x163)]=[],this[_0x46d0b5(0x13b)]=[],this['type']=_0x2c7426,this[_0x46d0b5(0x156)]=![];}[_0x53d043(0x1a3)](_0x4f1700,_0x41fd1e,_0x3c4c1b){var _0x2faa14=_0x53d043;_0x41fd1e=_0x41fd1e+(UNIT>>0x1)-(this['sizeDrawX']>>0x1),_0x3c4c1b=_0x3c4c1b+(UNIT>>0x1)-(this[_0x2faa14(0x19b)]>>0x1),this['renderWith'](_0x4f1700,_0x41fd1e,_0x3c4c1b);}[_0x53d043(0x145)](_0x474479,_0x342bec,_0x3153cb,_0x5942e7,_0x12a7af){var _0x45c16b=_0x53d043;if(this[_0x45c16b(0x156)]&&this[_0x45c16b(0x14a)]+0x1==this[_0x45c16b(0x14e)]&&this['currStage']+0x1==this[_0x45c16b(0x13e)])return;ctx[_0x45c16b(0x196)](Resource['getPng'](this[_0x45c16b(0x18d)]),typeof _0x5942e7==_0x45c16b(0x184)?this[_0x45c16b(0x135)]:_0x5942e7,typeof _0x12a7af=='undefined'?this[_0x45c16b(0x16b)]:_0x12a7af,this[_0x45c16b(0x153)],this[_0x45c16b(0x14d)],_0x342bec,_0x3153cb,this[_0x45c16b(0x15b)],this['sizeDrawY']);}[_0x53d043(0x192)](_0x283ab4){var _0xa06b8e=_0x53d043;this[_0xa06b8e(0x13b)][_0xa06b8e(0x142)]&&(this[_0xa06b8e(0x16b)]=this[_0xa06b8e(0x14d)]*this[_0xa06b8e(0x13b)][_0x283ab4]);}['update'](_0x214fee){var _0xf4ee03=_0x53d043;this[_0xf4ee03(0x1a7)]+=_0x214fee,this['currStageTime']+=_0x214fee,this['currTime']>=this[_0xf4ee03(0x148)]&&(this['currTime']=0x0,this['currCycle']=(this['currCycle']+0x1)%this[_0xf4ee03(0x14e)],this[_0xf4ee03(0x135)]=this[_0xf4ee03(0x153)]*this[_0xf4ee03(0x14a)]),this['maxStage']&&this[_0xf4ee03(0x134)]>=this['stageTime']&&(this[_0xf4ee03(0x134)]=0x0,this[_0xf4ee03(0x1a7)]=0x0,this[_0xf4ee03(0x14a)]=0x0,this[_0xf4ee03(0x1a5)]=(this[_0xf4ee03(0x1a5)]+0x1)%this[_0xf4ee03(0x13e)],this[_0xf4ee03(0x14e)]=this[_0xf4ee03(0x163)][this[_0xf4ee03(0x1a5)]],this[_0xf4ee03(0x16b)]+=this['startY']);}}class Entity{constructor(){var _0x2479e2=_0x53d043;this[_0x2479e2(0x193)]=null,this[_0x2479e2(0x179)]=null,this['frameCtr']=0x0,this[_0x2479e2(0x138)]=new Queue(FRAME_RATE);}[_0x53d043(0x1a3)](_0x1b2867,_0x2eab02,_0x4f9309){var _0x485ec7=_0x53d043;this[_0x485ec7(0x193)][_0x485ec7(0x1a3)](_0x1b2867,_0x2eab02,_0x4f9309);}['renderWith'](_0x46ce7f,_0x27aaa9,_0x5a3eef,_0x353a9a,_0x5bf65d){var _0x3edb54=_0x53d043;this[_0x3edb54(0x193)]['renderWith'](_0x46ce7f,_0x27aaa9,_0x5a3eef,_0x353a9a,_0x5bf65d);}['update'](_0xf58bb7,_0x27f1a7){var _0x3e2cc5=_0x53d043;this[_0x3e2cc5(0x193)][_0x3e2cc5(0x132)](_0xf58bb7);typeof _0x27f1a7=='undefined'&&this[_0x3e2cc5(0x179)]&&this[_0x3e2cc5(0x179)]['update'](_0xf58bb7);var _0x377377=this[_0x3e2cc5(0x1ad)]++-FRAME_RATE/SERVER_FRAME;while(this[_0x3e2cc5(0x138)]['length']()>=0x2&&this['buffer'][_0x3e2cc5(0x154)]()['ts']<=_0x377377){this['buffer']['shift']();}if(this['buffer'][_0x3e2cc5(0x142)]()>=0x2){var _0x4ab0fb=this['buffer'][_0x3e2cc5(0x15a)](),_0x8da146=this[_0x3e2cc5(0x138)][_0x3e2cc5(0x154)]();if(_0x4ab0fb['ts']<=_0x377377&&_0x377377<=_0x8da146['ts']){var _0x246473=_0x4ab0fb['x'],_0x3fab1b=_0x8da146['x'],_0x507e75=_0x4ab0fb['y'],_0x3fd48a=_0x8da146['y'],_0x1f4e23=_0x4ab0fb['ts'],_0x48bba7=_0x8da146['ts'];this['state']['x']=_0x246473+(_0x3fab1b-_0x246473)*(_0x377377-_0x1f4e23)/(_0x48bba7-_0x1f4e23),this[_0x3e2cc5(0x179)]['y']=_0x507e75+(_0x3fd48a-_0x507e75)*(_0x377377-_0x1f4e23)/(_0x48bba7-_0x1f4e23);var _0x296e2d=this[_0x3e2cc5(0x179)][_0x3e2cc5(0x161)],_0x5ced08=this[_0x3e2cc5(0x179)][_0x3e2cc5(0x141)];this[_0x3e2cc5(0x179)][_0x3e2cc5(0x161)]=getRowID(this[_0x3e2cc5(0x179)]['y']),this['state'][_0x3e2cc5(0x141)]=getColID(this[_0x3e2cc5(0x179)]['x']),typeof _0x27f1a7!=_0x3e2cc5(0x184)&&_0x27f1a7(_0x296e2d,_0x5ced08,this[_0x3e2cc5(0x179)][_0x3e2cc5(0x161)],this['state']['colId']);}}}}class Block extends Entity{constructor(_0x34de38,_0x31380f){var _0x2ed1c3=_0x53d043;super(),this['sprite']=new Sprite(types[_0x2ed1c3(0x140)]['block'],UNIT,UNIT,UNIT,UNIT),this['sprite']['cycleTime']=-0x1,this[_0x2ed1c3(0x193)][_0x2ed1c3(0x14e)]=0x1;}}var blockMatrix;class Stone extends Entity{constructor(_0x4cb2e7,_0x1d8c55){var _0x3fc1a2=_0x53d043;super(),this['sprite']=new Sprite(types[_0x3fc1a2(0x140)]['stone'],0x40,0x4f,UNIT,UNIT*1.23),this['sprite'][_0x3fc1a2(0x148)]=-0x1,this[_0x3fc1a2(0x193)]['maxCycle']=0x1;}}class Box extends Entity{constructor(_0x2e9b49,_0x194243,_0x565e5c){var _0x5a5c4e=_0x53d043;super(),this[_0x5a5c4e(0x179)]=new BoxState(_0x2e9b49,_0x194243,_0x565e5c),this[_0x5a5c4e(0x193)]=new Sprite(types['entity'][_0x5a5c4e(0x172)],0x40,0x4f,UNIT,UNIT*1.23),this[_0x5a5c4e(0x193)][_0x5a5c4e(0x148)]=-0x1,this['sprite'][_0x5a5c4e(0x14e)]=0x1;}}class Loot extends Entity{constructor(_0x47451e,_0x410215,_0x42bf51,_0x3b9a45){var _0x225fae=_0x53d043;super(),this[_0x225fae(0x179)]=new EntityState(_0x47451e,_0x410215,_0x42bf51),this[_0x225fae(0x193)]=new Sprite(types['entity'][_0x225fae(0x185)],0x20,0x30,UNIT,UNIT*1.5),this[_0x225fae(0x193)]['cycleTime']=INFINITE,this[_0x225fae(0x193)]['maxCycle']=0x1;}}loots={};class Player extends Entity{constructor(_0xc1f2d4,_0x2320cd,_0x4cc55e,_0x29628a,_0x4332a2){var _0x1cce74=_0x53d043;super(),this['state']=new PlayerState(_0xc1f2d4,_0x2320cd,_0x4cc55e,_0x29628a,_0x4332a2),this[_0x1cce74(0x193)]=new Sprite(playerNumToType[_0x4332a2],0x60,0x76,0x60,0x76),this[_0x1cce74(0x193)][_0x1cce74(0x14e)]=0x4,this[_0x1cce74(0x193)][_0x1cce74(0x13b)]=[0x0,0x1,0x2,0x0,0x3],this[_0x1cce74(0x193)][_0x1cce74(0x148)]=0xaa,this['state']['dir']=types[_0x1cce74(0x191)][_0x1cce74(0x1ab)],this['spacePressed']=![];}[_0x53d043(0x1a2)](){var _0x519ebc=_0x53d043;this[_0x519ebc(0x179)]['downPlayer'](),this[_0x519ebc(0x193)]=new Sprite(types['entity'][_0x519ebc(0x198)],0x4b,0x52,0x60,0x76),this['sprite'][_0x519ebc(0x148)]=0xc8,this['sprite'][_0x519ebc(0x14e)]=0x4;}['revivePlayer'](){var _0x5b9796=_0x53d043;this['state'][_0x5b9796(0x177)](),this['sprite']=new Sprite(playerNumToType[this['state'][_0x5b9796(0x136)]],0x60,0x76,0x60,0x76),this[_0x5b9796(0x193)]['frameVector']=[0x0,0x1,0x2,0x0,0x3],this[_0x5b9796(0x193)][_0x5b9796(0x148)]=0xaa,this[_0x5b9796(0x193)]['maxCycle']=0x4;}[_0x53d043(0x17b)](_0x10320e){var _0xdeebf2=_0x53d043;this['state'][_0xdeebf2(0x17b)](_0x10320e,![]);}[_0x53d043(0x132)](_0x821161){var _0x5d951a=_0x53d043;super[_0x5d951a(0x132)](_0x821161),this['sprite']['updateDir'](this[_0x5d951a(0x179)]['dir']);if(this[_0x5d951a(0x179)]['id']!=localPlayerId)return;var _0x4b0e8e={};if(keyPressed[types[_0x5d951a(0x137)]['up']])_0x4b0e8e['key']=types[_0x5d951a(0x137)]['up']<<0x1;else{if(keyPressed[types[_0x5d951a(0x137)][_0x5d951a(0x167)]])_0x4b0e8e[_0x5d951a(0x137)]=types['key'][_0x5d951a(0x167)]<<0x1;else{if(keyPressed[types[_0x5d951a(0x137)]['down']])_0x4b0e8e[_0x5d951a(0x137)]=types['key']['down']<<0x1;else keyPressed[types[_0x5d951a(0x137)][_0x5d951a(0x155)]]&&(_0x4b0e8e[_0x5d951a(0x137)]=types[_0x5d951a(0x137)]['left']<<0x1);}}var _0x23061f=!this[_0x5d951a(0x174)]&&keyPressed[types['key'][_0x5d951a(0x171)]];this[_0x5d951a(0x174)]=keyPressed[types['key'][_0x5d951a(0x171)]];!this[_0x5d951a(0x179)]['downed']&&_0x23061f&&(_0x4b0e8e[_0x5d951a(0x137)]='key'in _0x4b0e8e?_0x4b0e8e[_0x5d951a(0x137)]|0x1:0x1);if('key'in _0x4b0e8e){_0x4b0e8e[_0x5d951a(0x17a)]=inputSeqId++,server[_0x5d951a(0x14c)]['emit'](_0x5d951a(0x18e),{'o':types[_0x5d951a(0x18e)][_0x5d951a(0x15e)],'i':_0x4b0e8e});var _0x2e6fde=Object[_0x5d951a(0x190)]({},_0x4b0e8e);_0x2e6fde[_0x5d951a(0x13d)]=_0x821161,this[_0x5d951a(0x17b)](_0x2e6fde),pendingInputs[_0x5d951a(0x173)](_0x2e6fde);}}}localPlayerId='',playerNumToType=[types['entity'][_0x53d043(0x195)],types[_0x53d043(0x140)]['player2'],types[_0x53d043(0x140)][_0x53d043(0x180)],types[_0x53d043(0x140)][_0x53d043(0x188)]];function _0x306a(_0x3eb70c,_0x42dd5c){var _0x1bee8f=_0x1bee();return _0x306a=function(_0x306a50,_0x4d7c16){_0x306a50=_0x306a50-0x12b;var _0x512a4d=_0x1bee8f[_0x306a50];return _0x512a4d;},_0x306a(_0x3eb70c,_0x42dd5c);}class Bomb extends Entity{constructor(_0x30e44d,_0x3ebafa,_0x5df022){var _0x194dd9=_0x53d043;super(),this[_0x194dd9(0x193)]=new Sprite(types[_0x194dd9(0x140)][_0x194dd9(0x15d)],0x40,0x40,0x58,0x58),this[_0x194dd9(0x193)][_0x194dd9(0x148)]=0x190,this[_0x194dd9(0x193)][_0x194dd9(0x14e)]=0x3,this[_0x194dd9(0x179)]=new BombState(_0x30e44d,_0x3ebafa,_0x5df022,0x0,0x0,UNIT),this[_0x194dd9(0x138)]=new Queue(FRAME_RATE);}[_0x53d043(0x132)](_0x44658d){var _0x3d0454=_0x53d043;this[_0x3d0454(0x193)][_0x3d0454(0x132)](_0x44658d),super[_0x3d0454(0x132)](_0x44658d,(_0x371624,_0x26d4ef,_0x436122,_0x3a61a1)=>{var _0x4ab923=_0x3d0454;bombMatrix[_0x371624][_0x26d4ef]=0x0,bombMatrix[_0x436122][_0x3a61a1]=this[_0x4ab923(0x179)]['id'];});}}class Wave extends Entity{constructor(_0x54d29c,_0x1fb407,_0x674b86,_0x4201ea,_0x137e05){var _0x5d86f7=_0x53d043;super(),this[_0x5d86f7(0x179)]=new EntityState(_0x54d29c,0x0,0x0),this['id']=_0x54d29c,this[_0x5d86f7(0x161)]=_0x1fb407,this[_0x5d86f7(0x141)]=_0x674b86,this[_0x5d86f7(0x191)]=_0x4201ea,this[_0x5d86f7(0x1a9)]=_0x137e05,this[_0x5d86f7(0x170)]=[],this[_0x5d86f7(0x150)]=0x0,this[_0x5d86f7(0x19a)]=FRAME_RATE;var _0x55513c=new Sprite(types[_0x5d86f7(0x140)][_0x5d86f7(0x189)],0x3d,0x3d,UNIT,UNIT);_0x55513c['cycleTime']=0x14,_0x55513c[_0x5d86f7(0x14e)]=0x2,_0x55513c['i']=_0x1fb407,_0x55513c['j']=_0x674b86,_0x55513c[_0x5d86f7(0x16b)]=0x3d,_0x55513c[_0x5d86f7(0x199)]=0x1f4,_0x55513c['maxStage']=0x2,_0x55513c[_0x5d86f7(0x163)]=[_0x55513c[_0x5d86f7(0x14e)],0x9],_0x55513c[_0x5d86f7(0x156)]=!![],this['sprites'][_0x5d86f7(0x173)](_0x55513c);var _0x33a460=[[-0x1,0x0],[0x0,0x1],[0x1,0x0],[0x0,-0x1]];this[_0x5d86f7(0x175)]=_0x33a460[_0x4201ea-0x1];}[_0x53d043(0x132)](_0x492895){var _0x284b7b=_0x53d043;this[_0x284b7b(0x150)]++;var _0x4376d4=this[_0x284b7b(0x170)][_0x284b7b(0x142)];if(_0x4376d4<this[_0x284b7b(0x1a9)]){var _0x38a75f=new Sprite(types[_0x284b7b(0x140)][_0x284b7b(0x189)],0x3d,0x3d,UNIT,UNIT);_0x38a75f[_0x284b7b(0x148)]=0x14,_0x38a75f[_0x284b7b(0x14e)]=0x2;var _0x2563cb=this[_0x284b7b(0x170)][_0x4376d4-0x1];_0x38a75f['i']=_0x2563cb['i']+this[_0x284b7b(0x175)][0x0],_0x38a75f['j']=_0x2563cb['j']+this['direction'][0x1],_0x38a75f[_0x284b7b(0x16b)]=0x3d,_0x38a75f[_0x284b7b(0x199)]=0x1f4,_0x38a75f[_0x284b7b(0x13e)]=0x2,_0x38a75f[_0x284b7b(0x163)]=[_0x38a75f[_0x284b7b(0x14e)],0x9],_0x38a75f[_0x284b7b(0x156)]=!![],this[_0x284b7b(0x170)][_0x284b7b(0x173)](_0x38a75f);}for(var _0x5559a8 in this['sprites']){var _0x1b57c9=this[_0x284b7b(0x170)][_0x5559a8];if(_0x1b57c9[_0x284b7b(0x1a5)]==0x1&&_0x1b57c9[_0x284b7b(0x14a)]==0x8)continue;this[_0x284b7b(0x170)][_0x5559a8][_0x284b7b(0x132)](_0x492895);}this['createTime']==this[_0x284b7b(0x19a)]&&delete wavesClient[this['id']];}[_0x53d043(0x1a3)](_0x5c5d3b){var _0x5ccda3=_0x53d043;for(var _0x1747b7 in this[_0x5ccda3(0x170)]){var _0x3addc0=this['sprites'][_0x1747b7],_0x5d0e20=_0x3addc0['j']*UNIT+(UNIT>>0x1)-(_0x3addc0[_0x5ccda3(0x15b)]>>0x1),_0x38e0b2=_0x3addc0['i']*UNIT+(UNIT>>0x1)-(_0x3addc0[_0x5ccda3(0x19b)]>>0x1),_0x391fa0=[[_0x5d0e20,_0x38e0b2],[_0x5d0e20,_0x38e0b2+_0x3addc0[_0x5ccda3(0x19b)]],[_0x5d0e20,_0x38e0b2],[_0x5d0e20+_0x3addc0[_0x5ccda3(0x15b)],_0x38e0b2],[_0x5d0e20+_0x3addc0['sizeDrawX'],_0x38e0b2+_0x3addc0[_0x5ccda3(0x19b)]]],_0x40a39c=[[0x0*Math['PI']],[0x10e*Math['PI']/0xb4],[0x0*Math['PI']/0xb4],[0x5a*Math['PI']/0xb4],[0xb4*Math['PI']/0xb4]];ctx['translate'](_0x391fa0[this[_0x5ccda3(0x191)]][0x0],_0x391fa0[this['dir']][0x1]),ctx[_0x5ccda3(0x181)](_0x40a39c[this[_0x5ccda3(0x191)]]),_0x3addc0[_0x5ccda3(0x145)](_0x5c5d3b,0x0,0x0,undefined,_0x3addc0[_0x5ccda3(0x16b)]),ctx[_0x5ccda3(0x181)](-_0x40a39c[this[_0x5ccda3(0x191)]]),ctx[_0x5ccda3(0x1a4)](-_0x391fa0[this[_0x5ccda3(0x191)]][0x0],-_0x391fa0[this[_0x5ccda3(0x191)]][0x1]);}}}var ctx,score;validKeys={},validKeys[types[_0x53d043(0x137)]['up']]=0x1,validKeys[types['key']['right']]=0x1,validKeys[types['key']['down']]=0x1,validKeys[types[_0x53d043(0x137)][_0x53d043(0x155)]]=0x1,validKeys[types['key']['space']]=0x1,keyPressed={};var server;mapToBGM=[types[_0x53d043(0x14b)]['ship'],types[_0x53d043(0x14b)]['x'],types[_0x53d043(0x14b)][_0x53d043(0x194)]];function init(){var _0x29211f=_0x53d043;document['addEventListener']('keydown',function(_0x5cba75){var _0x418409=_0x306a;_0x5cba75[_0x418409(0x1a0)]in validKeys&&(keyPressed[_0x5cba75[_0x418409(0x1a0)]]=!![]);}),document[_0x29211f(0x17e)](_0x29211f(0x178),function(_0x92a57){var _0x18d59a=_0x29211f;_0x92a57[_0x18d59a(0x1a0)]in validKeys&&(keyPressed[_0x92a57[_0x18d59a(0x1a0)]]=![]);}),initGame();var _0x48950a=io('ws://bnbserver.onrender.com',{'withCredentials':!![],'transports':[_0x29211f(0x18a)]});_0x48950a['on'](_0x29211f(0x18e),function(_0x46585f){var _0x4aa692=_0x29211f;msgQueue[_0x4aa692(0x173)](_0x46585f);}),server=_0x48950a;}function setPlayerPosition(_0x4e60fc,_0x426f42,_0x1662a4){var _0x40255c=_0x53d043;_0x4e60fc[_0x40255c(0x179)]['x']=_0x426f42,_0x4e60fc[_0x40255c(0x179)]['y']=_0x1662a4,_0x4e60fc[_0x40255c(0x179)][_0x40255c(0x161)]=getRowID(_0x1662a4),_0x4e60fc[_0x40255c(0x179)][_0x40255c(0x141)]=getColID(_0x426f42);}var currentMap=0x0;function _0x1bee(){var _0x366252=['forEach','stageCycles','1746696bppdfj','score','45RMczPH','right','downed','justPut','iterate','startY','loadSnds','bg.ogg','width','height','sprites','space','box','push','spacePressed','direction','ship','revivePlayer','keyup','state','seqId','applyInput','keys','new_player','addEventListener','33455394sPIeYQ','player3','rotate','block','12388dkeGvD','undefined','loot','style','play','player4','wave','websocket','char1.png','sndMap','type','opcode','loadPngs','assign','dir','updateDir','sprite','resident','player','drawImage','sea.mp3','player_downed','stageTime','ttl','sizeDrawY','explode','char2.png','pngNum','resident.m4a','keyCode','lay.wav','downPlayer','render','translate','currStage','wave.png','currTime','exp.wav','len','maxBombNumber','down','loot.png','frameCtr','box.png','absolute','onReady','onload','2356041ppzKJj','catch','2XinidD','pauseSnd','currentTime','canvas','shift','7665665ZpPcRi','update','playSnd','currStageTime','startX','playerNum','key','buffer','put_bomb','pngNow','frameVector','empty','delta','maxStage','volume','entity','colId','length','char3.png','aid','renderWith','getPng','speed','cycleTime','currentBombNumber','currCycle','sound','volatile','sizeY','maxCycle','732867QpJHiU','createTime','down.png','getContext','sizeX','peekSecond','left','oneTime','pngMap','pickup_loot','loot.wav','peek','sizeDrawX','pause','bomb','move','2815308GzazJe','new_map','rowId'];_0x1bee=function(){return _0x366252;};return _0x1bee();}function handleMessage(_0xf0b587){var _0x1f1596=_0x53d043;switch(_0xf0b587['o']){case types['opcode'][_0x1f1596(0x17d)]:localPlayerId=_0xf0b587['id'];case types['opcode'][_0x1f1596(0x160)]:stoneMatrix=clearMatrix();var _0x22c786=maps[_0xf0b587['m']];for(var _0x1cd918=0x0;_0x1cd918<MAX_ROW;_0x1cd918++){for(var _0x30fd37=0x0;_0x30fd37<MAX_COL;_0x30fd37++){_0x22c786[_0x1cd918][_0x30fd37]==0x2&&(stoneMatrix[_0x1cd918][_0x30fd37]=0x1);}}Resource[_0x1f1596(0x12d)](mapToBGM[currentMap]),Resource[_0x1f1596(0x133)](mapToBGM[_0xf0b587['m']]),currentMap=_0xf0b587['m'];break;case types[_0x1f1596(0x18e)][_0x1f1596(0x15e)]:for(var _0x3de9c2 in players){var _0x5409cf=![];for(var _0x30fd37 in _0xf0b587['p']){_0x5409cf|=_0x3de9c2==_0xf0b587['p'][_0x30fd37]['id'];}!_0x5409cf&&delete players[_0x3de9c2];}for(var _0x1cd918 in _0xf0b587['p']){var _0x1a8888=_0xf0b587['p'][_0x1cd918],_0x42dca4=intToPlayerState(_0x1a8888['s']),_0x3de9c2=_0x1a8888['id'];!(_0x3de9c2 in players)&&(players[_0x3de9c2]=new Player(_0x3de9c2,_0x42dca4['x'],_0x42dca4['y'],UNIT,_0x42dca4['playerNum']));var _0x4d1aa5=players[_0x3de9c2];if(_0x3de9c2===localPlayerId){setPlayerPosition(_0x4d1aa5,_0x42dca4['x'],_0x42dca4['y']);while(!pendingInputs['empty']()){var _0x31890a=pendingInputs['peek']();if(_0x31890a[_0x1f1596(0x17a)]<=_0x1a8888[_0x1f1596(0x144)])pendingInputs['shift']();else break;}_0x4d1aa5[_0x1f1596(0x179)][_0x1f1596(0x147)]=_0x42dca4[_0x1f1596(0x147)],pendingInputs[_0x1f1596(0x16a)](_0x4ec6a1=>{var _0x331ae7=_0x1f1596;_0x4d1aa5[_0x331ae7(0x17b)](_0x4ec6a1);}),_0x42dca4[_0x1f1596(0x169)]&&Resource[_0x1f1596(0x133)](types['sound']['put_bomb']),_0x42dca4['justPick']&&Resource['playSnd'](types[_0x1f1596(0x14b)][_0x1f1596(0x158)]);}else _0x4d1aa5[_0x1f1596(0x179)][_0x1f1596(0x191)]=_0x42dca4[_0x1f1596(0x191)],_0x4d1aa5[_0x1f1596(0x138)][_0x1f1596(0x173)]({'ts':_0x4d1aa5[_0x1f1596(0x1ad)],'x':_0x42dca4['x'],'y':_0x42dca4['y']});_0x4d1aa5[_0x1f1596(0x179)][_0x1f1596(0x165)]=_0x42dca4[_0x1f1596(0x165)],_0x4d1aa5['state'][_0x1f1596(0x149)]=_0x42dca4['currentBombNumber'],_0x4d1aa5[_0x1f1596(0x179)]['maxBombNumber']=_0x42dca4[_0x1f1596(0x1aa)],!_0x4d1aa5[_0x1f1596(0x179)][_0x1f1596(0x168)]&&_0x42dca4[_0x1f1596(0x168)]&&_0x4d1aa5[_0x1f1596(0x1a2)](),_0x4d1aa5[_0x1f1596(0x179)][_0x1f1596(0x168)]&&!_0x42dca4[_0x1f1596(0x168)]&&_0x4d1aa5[_0x1f1596(0x177)]();}lootMatrix=intArrayToMatrix(_0xf0b587['l']),boxMatrix=intArrayToMatrix(_0xf0b587['bo']);var _0x4b6f03=Object[_0x1f1596(0x17c)](wavesClient)['length'],_0x2bce69=![];for(var _0x3de9c2 in bombs){var _0x5409cf=![];for(var _0x30fd37 in _0xf0b587['b']){_0x5409cf|=_0x3de9c2==_0xf0b587['b'][_0x30fd37]['id'];}if(!_0x5409cf){_0x2bce69=!![];var _0x212e08=bombs[_0x3de9c2];bombMatrix[_0x212e08['state'][_0x1f1596(0x161)]][_0x212e08[_0x1f1596(0x179)]['colId']]=0x0,delete bombs[_0x3de9c2];var _0x27fe60=new Wave(_0x4b6f03,_0x212e08[_0x1f1596(0x179)][_0x1f1596(0x161)],_0x212e08['state']['colId'],0x0,0x0);_0x27fe60['ttl']=0x14,_0x27fe60[_0x1f1596(0x170)][0x0][_0x1f1596(0x148)]=0x14,_0x27fe60['sprites'][0x0]['maxCycle']=0x3,_0x27fe60[_0x1f1596(0x170)][0x0]['startY']=0x0,_0x27fe60[_0x1f1596(0x170)][0x0][_0x1f1596(0x13e)]=0x0,_0x27fe60[_0x1f1596(0x170)][0x0][_0x1f1596(0x15b)]=0x48,_0x27fe60[_0x1f1596(0x170)][0x0]['sizeDrawy']=0x48,wavesClient[_0x4b6f03++]=_0x27fe60;}}_0x2bce69&&Resource[_0x1f1596(0x133)](types[_0x1f1596(0x14b)][_0x1f1596(0x19c)]);for(var _0x1cd918 in _0xf0b587['b']){var _0x5d1e67=_0xf0b587['b'][_0x1cd918],_0x42dca4=_0x5d1e67['s'],_0x3de9c2=_0x5d1e67['id'];!(_0x3de9c2 in bombs)?bombs[_0x3de9c2]=new Bomb(_0x3de9c2,_0x42dca4>>0xa,_0x42dca4&0x3ff):bombs[_0x3de9c2][_0x1f1596(0x138)][_0x1f1596(0x173)]({'ts':bombs[_0x3de9c2][_0x1f1596(0x1ad)],'x':_0x42dca4>>0xa,'y':_0x42dca4&0x3ff});}for(var _0x1cd918 in _0xf0b587['w']){var _0x34a872=_0xf0b587['w'][_0x1cd918],_0x42dca4=intToWaveState(_0x34a872['s']);wavesClient[_0x4b6f03]=new Wave(_0x4b6f03++,_0x42dca4[_0x1f1596(0x161)],_0x42dca4[_0x1f1596(0x141)],_0x42dca4[_0x1f1596(0x191)],_0x42dca4['len']);}break;}}var block=new Block(0x0,0x0),stone=new Stone(0x0,0x0),box=new Box(0x0,-0x1,-0x1),loot=new Loot(0x0,-0x1,-0x1,0x0);function initGame(){var _0x23500f=_0x53d043,_0x598ec5=document['getElementById'](_0x23500f(0x12f));ctx=_0x598ec5[_0x23500f(0x152)]('2d'),_0x598ec5[_0x23500f(0x16e)]=WIDTH,_0x598ec5[_0x23500f(0x16f)]=HEIGHT,_0x598ec5[_0x23500f(0x186)]['position']=_0x23500f(0x1af),score=document['getElementById'](_0x23500f(0x165)),blockMatrix=new Array(MAX_ROW);for(var _0x3e2e0c=0x0;_0x3e2e0c<MAX_ROW;_0x3e2e0c++){blockMatrix[_0x3e2e0c]=new Array(MAX_COL);for(var _0x18b3b9=0x0;_0x18b3b9<MAX_COL;_0x18b3b9++)blockMatrix[_0x3e2e0c][_0x18b3b9]=getRandomInt(0x5);}boxMatrix=clearMatrix(),stoneMatrix=clearMatrix(),bombMatrix=clearMatrix(),lootMatrix=clearMatrix(),waveMatrix=clearMatrix(),playerMatrix=clearMatrix({});var _0x313470=0x3e8/FRAME_RATE,_0x26eab3=function(){var _0x352228=_0x23500f;setTimeout(_0x26eab3,_0x313470);while(!msgQueue[_0x352228(0x13c)]()){handleMessage(msgQueue[_0x352228(0x130)]());}update(_0x313470);for(var _0x47a564 in players){players[_0x47a564][_0x352228(0x132)](_0x313470);}for(var _0x47a564 in wavesClient){wavesClient[_0x47a564]['update'](_0x313470);}render(_0x313470);};setTimeout(_0x26eab3,_0x313470);}function render(_0x330fa5){var _0x12a6bc=_0x53d043;for(var _0x580791=0x0;_0x580791<MAX_ROW;_0x580791++){for(var _0x1857ea=0x0;_0x1857ea<MAX_COL;_0x1857ea++){block[_0x12a6bc(0x145)](0x0,_0x1857ea*UNIT,_0x580791*UNIT,blockMatrix[_0x580791][_0x1857ea]*block[_0x12a6bc(0x193)][_0x12a6bc(0x153)],0x0);}}for(var _0x580791 in wavesClient){wavesClient[_0x580791][_0x12a6bc(0x1a3)](_0x330fa5);}for(var _0x580791=0x0;_0x580791<MAX_ROW;_0x580791++){var _0x40f1cb=[];for(var _0x1857ea=0x0;_0x1857ea<MAX_COL;_0x1857ea++){var _0x14a499=_0x1857ea*UNIT,_0x105217=_0x580791*UNIT;boxMatrix[_0x580791][_0x1857ea]&&box[_0x12a6bc(0x1a3)](0x0,_0x14a499,_0x105217);stoneMatrix[_0x580791][_0x1857ea]&&stone[_0x12a6bc(0x1a3)](0x0,_0x14a499,_0x105217);if(bombMatrix[_0x580791][_0x1857ea]){var _0x4225c2=bombs[bombMatrix[_0x580791][_0x1857ea]];bombs[bombMatrix[_0x580791][_0x1857ea]]['render'](0x0,_0x4225c2[_0x12a6bc(0x179)]['x']-(UNIT>>0x1),_0x4225c2[_0x12a6bc(0x179)]['y']-(UNIT>>0x1));}lootMatrix[_0x580791][_0x1857ea]&&(_0x105217-=loot['sprite']['sizeDrawY']>>0x1,loot[_0x12a6bc(0x145)](0x0,_0x14a499,_0x105217,(lootMatrix[_0x580791][_0x1857ea]-0x1)*loot[_0x12a6bc(0x193)][_0x12a6bc(0x153)],0x0));for(var _0x35ee7f in playerMatrix[_0x580791][_0x1857ea]){_0x40f1cb[_0x12a6bc(0x173)](_0x35ee7f);}}for(var _0x35ee7f in _0x40f1cb){var _0x4e4723=players[_0x40f1cb[_0x35ee7f]],_0x14a499=_0x4e4723[_0x12a6bc(0x179)]['x']-(UNIT>>0x1),_0x105217=_0x4e4723[_0x12a6bc(0x179)]['y']-(_0x4e4723[_0x12a6bc(0x193)][_0x12a6bc(0x19b)]>>0x1);_0x4e4723[_0x12a6bc(0x1a3)](_0x330fa5,_0x14a499,_0x105217);}}var _0x5bf92f='';for(var _0x580791 in players){_0x5bf92f+=players[_0x580791][_0x12a6bc(0x179)][_0x12a6bc(0x165)]['toString']()+'\x20';}score['innerHTML']=_0x5bf92f;}Resource[_0x53d043(0x16c)]([[types[_0x53d043(0x14b)][_0x53d043(0x176)],_0x53d043(0x16d),0.3,0x1],[types[_0x53d043(0x14b)][_0x53d043(0x194)],_0x53d043(0x19f),0.3,0x1],[types[_0x53d043(0x14b)]['x'],_0x53d043(0x197),0.3,0x1],[types[_0x53d043(0x14b)][_0x53d043(0x139)],_0x53d043(0x1a1),0x1,0x0],[types[_0x53d043(0x14b)][_0x53d043(0x19c)],_0x53d043(0x1a8),0x1,0x0],[types[_0x53d043(0x14b)][_0x53d043(0x158)],_0x53d043(0x159),0x1,0x0]]),Resource[_0x53d043(0x18f)]([[types[_0x53d043(0x140)][_0x53d043(0x195)],'char4.png'],[types['entity']['player2'],_0x53d043(0x19d)],[types[_0x53d043(0x140)][_0x53d043(0x180)],_0x53d043(0x143)],[types[_0x53d043(0x140)][_0x53d043(0x188)],_0x53d043(0x18b)],[types['entity'][_0x53d043(0x15d)],'bomb.png'],[types[_0x53d043(0x140)]['wave'],_0x53d043(0x1a6)],[types['entity'][_0x53d043(0x182)],'block.png'],[types['entity']['stone'],'stone.png'],[types['entity']['box'],_0x53d043(0x1ae)],[types[_0x53d043(0x140)][_0x53d043(0x185)],_0x53d043(0x1ac)],[types[_0x53d043(0x140)]['player_downed'],_0x53d043(0x151)]],init);
