var _0xfa3985=_0x4a6c;(function(_0x103e62,_0x3fcad9){var _0x3dba82=_0x4a6c,_0x156275=_0x103e62();while(!![]){try{var _0x48163b=parseInt(_0x3dba82(0x1d2))/0x1+parseInt(_0x3dba82(0x19c))/0x2*(parseInt(_0x3dba82(0x19e))/0x3)+parseInt(_0x3dba82(0x1e0))/0x4*(-parseInt(_0x3dba82(0x1ba))/0x5)+-parseInt(_0x3dba82(0x1ec))/0x6*(-parseInt(_0x3dba82(0x1d6))/0x7)+-parseInt(_0x3dba82(0x1d1))/0x8+-parseInt(_0x3dba82(0x1be))/0x9+parseInt(_0x3dba82(0x19f))/0xa*(parseInt(_0x3dba82(0x1d0))/0xb);if(_0x48163b===_0x3fcad9)break;else _0x156275['push'](_0x156275['shift']());}catch(_0x2d2313){_0x156275['push'](_0x156275['shift']());}}}(_0x4875,0x2a114),inputSeqId=0x0,pendingInputs=new Queue(MAX_QUEUE_SIZE),Resource={},Resource[_0xfa3985(0x1bb)]={},Resource['sndMap']={},Resource[_0xfa3985(0x1e2)]=0x0,Resource['pngNow']=0x0,Resource[_0xfa3985(0x1ae)]=null,Resource[_0xfa3985(0x205)]=function(_0x2428a4){_0x2428a4['forEach'](function(_0x53c762){var _0x53114d=_0x4a6c,_0x34c117=_0x53c762[0x0],_0x4ca368=_0x53c762[0x1],_0x3bef35=_0x53c762[0x2],_0x24bc8b=_0x53c762[0x3],_0x38e7bf=new Audio(_0x4ca368);_0x38e7bf[_0x53114d(0x1e1)]=_0x3bef35,_0x38e7bf[_0x53114d(0x17b)]=_0x24bc8b,Resource[_0x53114d(0x1f4)][_0x34c117]=_0x38e7bf;});},Resource[_0xfa3985(0x1f3)]=function(_0x1e5caf,_0x314015){var _0x5e2618=_0xfa3985;Resource['pngNum']+=_0x1e5caf[_0x5e2618(0x1ad)],Resource[_0x5e2618(0x1ae)]=_0x314015,_0x1e5caf[_0x5e2618(0x181)](function(_0x3df048){var _0x1d69ad=_0x5e2618,_0x39513a=_0x3df048[0x0],_0xb91571=_0x3df048[0x1],_0x18f88d=new Image();_0x18f88d[_0x1d69ad(0x1e7)]=function(){var _0x3e442d=_0x1d69ad;Resource['pngMap'][_0x39513a]=_0x18f88d,Resource[_0x3e442d(0x1aa)]++;if(Resource[_0x3e442d(0x1aa)]==Resource[_0x3e442d(0x1e2)])Resource[_0x3e442d(0x1ae)]();},Resource['pngMap'][_0x39513a]=![],_0x18f88d[_0x1d69ad(0x19a)]=_0xb91571;});},Resource[_0xfa3985(0x1fc)]=function(_0x329b57){return Resource['pngMap'][_0x329b57];},Resource[_0xfa3985(0x1fe)]=function(_0x1fe0bf){var _0x566aee=_0xfa3985;Resource[_0x566aee(0x1f4)][_0x1fe0bf][_0x566aee(0x204)]=0x0;var _0x528bb4=Resource['sndMap'][_0x1fe0bf]['play']();_0x528bb4!=undefined&&_0x528bb4['then'](_0x4d2990=>{})['catch'](_0x3ec640=>{});},Resource['pauseSnd']=function(_0x4472e7){var _0x279c46=_0xfa3985;Resource['sndMap'][_0x4472e7]['pause'](),Resource['sndMap'][_0x4472e7][_0x279c46(0x204)]=0x0;});class Sprite{constructor(_0x3d1f88,_0x3e077b,_0x228928,_0x8d9a9,_0x14614f){var _0x5c275a=_0xfa3985;this[_0x5c275a(0x186)]=0x0,this[_0x5c275a(0x17a)]=0x0,this[_0x5c275a(0x1f0)]=_0x3e077b,this[_0x5c275a(0x1b6)]=_0x228928,this['sizeDrawX']=_0x8d9a9,this[_0x5c275a(0x1da)]=_0x14614f,this[_0x5c275a(0x1dd)]=0x0,this[_0x5c275a(0x200)]=0x0,this[_0x5c275a(0x191)]=0x0,this[_0x5c275a(0x1ff)]=0x0,this[_0x5c275a(0x1bf)]=0x0,this[_0x5c275a(0x1b9)]=0x0,this[_0x5c275a(0x1a6)]=0x0,this[_0x5c275a(0x195)]=0x0,this[_0x5c275a(0x1b1)]=[],this['frameVector']=[],this[_0x5c275a(0x1ce)]=_0x3d1f88,this[_0x5c275a(0x199)]=![];}[_0xfa3985(0x1a4)](_0x3dbf20,_0x4fa616,_0x5185a3){var _0x2ebde7=_0xfa3985;_0x4fa616=_0x4fa616+(UNIT>>0x1)-(this[_0x2ebde7(0x1b2)]>>0x1),_0x5185a3=_0x5185a3+(UNIT>>0x1)-(this['sizeDrawY']>>0x1),this[_0x2ebde7(0x201)](_0x3dbf20,_0x4fa616,_0x5185a3);}[_0xfa3985(0x201)](_0x3aa90c,_0x16d65d,_0x572f24,_0x174c98,_0xfa2fb3){var _0x26ef18=_0xfa3985;if(this[_0x26ef18(0x199)]&&this['currCycle']+0x1==this[_0x26ef18(0x1ff)]&&this['currStage']+0x1==this[_0x26ef18(0x195)])return;ctx['drawImage'](Resource['getPng'](this[_0x26ef18(0x1ce)]),typeof _0x174c98==_0x26ef18(0x17f)?this[_0x26ef18(0x186)]:_0x174c98,typeof _0xfa2fb3==_0x26ef18(0x17f)?this[_0x26ef18(0x17a)]:_0xfa2fb3,this['sizeX'],this[_0x26ef18(0x1b6)],_0x16d65d,_0x572f24,this[_0x26ef18(0x1b2)],this[_0x26ef18(0x1da)]);}[_0xfa3985(0x18f)](_0xec8c50){var _0x5e6205=_0xfa3985;this[_0x5e6205(0x1b0)]['length']&&(this['startY']=this[_0x5e6205(0x1b6)]*this[_0x5e6205(0x1b0)][_0xec8c50]);}[_0xfa3985(0x1f8)](_0x455056){var _0x2478f5=_0xfa3985;this[_0x2478f5(0x200)]+=_0x455056,this[_0x2478f5(0x1bf)]+=_0x455056,this['currTime']>=this[_0x2478f5(0x1dd)]&&(this[_0x2478f5(0x200)]=0x0,this[_0x2478f5(0x191)]=(this[_0x2478f5(0x191)]+0x1)%this[_0x2478f5(0x1ff)],this[_0x2478f5(0x186)]=this[_0x2478f5(0x1f0)]*this['currCycle']),this[_0x2478f5(0x195)]&&this[_0x2478f5(0x1bf)]>=this['stageTime']&&(this[_0x2478f5(0x1bf)]=0x0,this[_0x2478f5(0x200)]=0x0,this[_0x2478f5(0x191)]=0x0,this[_0x2478f5(0x1a6)]=(this[_0x2478f5(0x1a6)]+0x1)%this[_0x2478f5(0x195)],this[_0x2478f5(0x1ff)]=this[_0x2478f5(0x1b1)][this[_0x2478f5(0x1a6)]],this[_0x2478f5(0x17a)]+=this[_0x2478f5(0x17a)]);}}class Entity{constructor(){var _0x372e98=_0xfa3985;this[_0x372e98(0x1c6)]=null,this[_0x372e98(0x1f9)]=null,this[_0x372e98(0x1a7)]=0x0,this[_0x372e98(0x1b3)]=new Queue(FRAME_RATE);}[_0xfa3985(0x1a4)](_0x4d3732,_0x244f8c,_0x50d389){var _0x26b5a4=_0xfa3985;this[_0x26b5a4(0x1c6)][_0x26b5a4(0x1a4)](_0x4d3732,_0x244f8c,_0x50d389);}[_0xfa3985(0x201)](_0x3dbf5c,_0x1b33c0,_0x53e165,_0x30ae3b,_0x13f4ba){var _0x312952=_0xfa3985;this[_0x312952(0x1c6)]['renderWith'](_0x3dbf5c,_0x1b33c0,_0x53e165,_0x30ae3b,_0x13f4ba);}['update'](_0xbab6e3,_0x14630e){var _0x5c0a12=_0xfa3985;this[_0x5c0a12(0x1c6)]['update'](_0xbab6e3);typeof _0x14630e==_0x5c0a12(0x17f)&&this['state']&&this[_0x5c0a12(0x1f9)][_0x5c0a12(0x1f8)](_0xbab6e3);var _0x3b0cee=this[_0x5c0a12(0x1a7)]++-FRAME_RATE/SERVER_FRAME;while(this['buffer'][_0x5c0a12(0x1ad)]()>=0x2&&this[_0x5c0a12(0x1b3)][_0x5c0a12(0x190)]()['ts']<=_0x3b0cee){this[_0x5c0a12(0x1b3)]['shift']();}if(this['buffer'][_0x5c0a12(0x1ad)]()>=0x2){var _0x3a3296=this['buffer'][_0x5c0a12(0x1cc)](),_0x404ba1=this['buffer'][_0x5c0a12(0x190)]();if(_0x3a3296['ts']<=_0x3b0cee&&_0x3b0cee<=_0x404ba1['ts']){var _0x34e723=_0x3a3296['x'],_0x50724d=_0x404ba1['x'],_0x4a6aea=_0x3a3296['y'],_0x49be4e=_0x404ba1['y'],_0x2392b8=_0x3a3296['ts'],_0x5784c2=_0x404ba1['ts'];this[_0x5c0a12(0x1f9)]['x']=_0x34e723+(_0x50724d-_0x34e723)*(_0x3b0cee-_0x2392b8)/(_0x5784c2-_0x2392b8),this['state']['y']=_0x4a6aea+(_0x49be4e-_0x4a6aea)*(_0x3b0cee-_0x2392b8)/(_0x5784c2-_0x2392b8);var _0x2fdb1=this[_0x5c0a12(0x1f9)][_0x5c0a12(0x1a3)],_0x4366ee=this[_0x5c0a12(0x1f9)][_0x5c0a12(0x1a0)];this['state'][_0x5c0a12(0x1a3)]=getRowID(this[_0x5c0a12(0x1f9)]['y']),this[_0x5c0a12(0x1f9)][_0x5c0a12(0x1a0)]=getColID(this[_0x5c0a12(0x1f9)]['x']),typeof _0x14630e!='undefined'&&_0x14630e(_0x2fdb1,_0x4366ee,this[_0x5c0a12(0x1f9)][_0x5c0a12(0x1a3)],this[_0x5c0a12(0x1f9)][_0x5c0a12(0x1a0)]);}}}}function _0x4a6c(_0x21c40a,_0x3a8a5c){var _0x48750a=_0x4875();return _0x4a6c=function(_0x4a6ca1,_0x19dd95){_0x4a6ca1=_0x4a6ca1-0x179;var _0x4513a0=_0x48750a[_0x4a6ca1];return _0x4513a0;},_0x4a6c(_0x21c40a,_0x3a8a5c);}class Block extends Entity{constructor(_0x26bd3a,_0x48f5a7){var _0x5bc090=_0xfa3985;super(),this[_0x5bc090(0x1c6)]=new Sprite(types[_0x5bc090(0x18e)][_0x5bc090(0x18d)],UNIT,UNIT,UNIT,UNIT),this[_0x5bc090(0x1c6)][_0x5bc090(0x1dd)]=-0x1,this['sprite'][_0x5bc090(0x1ff)]=0x1;}}var blockMatrix;class Stone extends Entity{constructor(_0xa3ffce,_0x36ab2e){var _0x96aafc=_0xfa3985;super(),this['sprite']=new Sprite(types[_0x96aafc(0x18e)][_0x96aafc(0x1e5)],0x40,0x4f,UNIT,UNIT*1.23),this['sprite'][_0x96aafc(0x1dd)]=-0x1,this[_0x96aafc(0x1c6)]['maxCycle']=0x1;}}class Box extends Entity{constructor(_0x26c36e,_0x22536d,_0x24c295){var _0x44311d=_0xfa3985;super(),this['state']=new BoxState(_0x26c36e,_0x22536d,_0x24c295),this[_0x44311d(0x1c6)]=new Sprite(types[_0x44311d(0x18e)][_0x44311d(0x1b5)],0x40,0x4f,UNIT,UNIT*1.23),this[_0x44311d(0x1c6)][_0x44311d(0x1dd)]=-0x1,this['sprite'][_0x44311d(0x1ff)]=0x1;}}class Loot extends Entity{constructor(_0x53b7f8,_0x59bb7c,_0x4038ad,_0x48bac0){var _0x2f1ad6=_0xfa3985;super(),this[_0x2f1ad6(0x1f9)]=new EntityState(_0x53b7f8,_0x59bb7c,_0x4038ad),this[_0x2f1ad6(0x1c6)]=new Sprite(types[_0x2f1ad6(0x18e)][_0x2f1ad6(0x197)],0x20,0x30,UNIT,UNIT*1.5),this[_0x2f1ad6(0x1c6)]['cycleTime']=INFINITE,this[_0x2f1ad6(0x1c6)]['maxCycle']=0x1;}}loots={};class Player extends Entity{constructor(_0x5e5077,_0x324d7a,_0x3c53ae,_0x315c3a,_0xef81d6){var _0x25d378=_0xfa3985;super(),this[_0x25d378(0x1f9)]=new PlayerState(_0x5e5077,_0x324d7a,_0x3c53ae,_0x315c3a,_0xef81d6),this[_0x25d378(0x1c6)]=new Sprite(playerNumToType[_0xef81d6],0x60,0x76,0x60,0x76),this[_0x25d378(0x1c6)][_0x25d378(0x1ff)]=0x4,this[_0x25d378(0x1c6)][_0x25d378(0x1b0)]=[0x0,0x1,0x2,0x0,0x3],this[_0x25d378(0x1c6)][_0x25d378(0x1dd)]=0xaa,this['state'][_0x25d378(0x1b7)]=types[_0x25d378(0x1b7)]['down'],this[_0x25d378(0x1c5)]=![];}[_0xfa3985(0x188)](){var _0x4e42dd=_0xfa3985;this[_0x4e42dd(0x1f9)][_0x4e42dd(0x188)](),this[_0x4e42dd(0x1c6)]=new Sprite(types['entity'][_0x4e42dd(0x189)],0x4b,0x52,0x60,0x76),this[_0x4e42dd(0x1c6)][_0x4e42dd(0x1dd)]=0xc8,this[_0x4e42dd(0x1c6)][_0x4e42dd(0x1ff)]=0x4;}[_0xfa3985(0x1a2)](){var _0x75f12a=_0xfa3985;this[_0x75f12a(0x1f9)][_0x75f12a(0x1a2)](),this['sprite']=new Sprite(playerNumToType[this[_0x75f12a(0x1f9)][_0x75f12a(0x1fa)]],0x60,0x76,0x60,0x76),this['sprite']['frameVector']=[0x0,0x1,0x2,0x0,0x3],this[_0x75f12a(0x1c6)]['cycleTime']=0xaa,this[_0x75f12a(0x1c6)][_0x75f12a(0x1ff)]=0x4;}[_0xfa3985(0x187)](_0x18a3e9){var _0x458a90=_0xfa3985;this[_0x458a90(0x1f9)]['applyInput'](_0x18a3e9,![]);}[_0xfa3985(0x1f8)](_0x5ec3e7){var _0x4705a1=_0xfa3985;super[_0x4705a1(0x1f8)](_0x5ec3e7),this[_0x4705a1(0x1c6)]['updateDir'](this[_0x4705a1(0x1f9)][_0x4705a1(0x1b7)]);if(this[_0x4705a1(0x1f9)]['id']!=localPlayerId)return;var _0x2df79c={};if(keyPressed[types[_0x4705a1(0x1c4)]['up']])_0x2df79c['key']=types[_0x4705a1(0x1c4)]['up']<<0x1;else{if(keyPressed[types[_0x4705a1(0x1c4)][_0x4705a1(0x1a1)]])_0x2df79c[_0x4705a1(0x1c4)]=types[_0x4705a1(0x1c4)][_0x4705a1(0x1a1)]<<0x1;else{if(keyPressed[types[_0x4705a1(0x1c4)][_0x4705a1(0x1c9)]])_0x2df79c['key']=types[_0x4705a1(0x1c4)][_0x4705a1(0x1c9)]<<0x1;else keyPressed[types[_0x4705a1(0x1c4)][_0x4705a1(0x1b8)]]&&(_0x2df79c['key']=types[_0x4705a1(0x1c4)]['left']<<0x1);}}var _0x2cf592=!this['spacePressed']&&keyPressed[types[_0x4705a1(0x1c4)][_0x4705a1(0x1c3)]];this['spacePressed']=keyPressed[types[_0x4705a1(0x1c4)][_0x4705a1(0x1c3)]];!this[_0x4705a1(0x1f9)]['downed']&&_0x2cf592&&(_0x2df79c[_0x4705a1(0x1c4)]=_0x4705a1(0x1c4)in _0x2df79c?_0x2df79c[_0x4705a1(0x1c4)]|0x1:0x1);if(_0x4705a1(0x1c4)in _0x2df79c){_0x2df79c[_0x4705a1(0x1f6)]=inputSeqId++,server['volatile'][_0x4705a1(0x1db)](_0x4705a1(0x202),{'o':types['opcode']['move'],'i':_0x2df79c});var _0x4c846f=Object[_0x4705a1(0x179)]({},_0x2df79c);_0x4c846f[_0x4705a1(0x1fd)]=_0x5ec3e7,this[_0x4705a1(0x187)](_0x4c846f),pendingInputs[_0x4705a1(0x194)](_0x4c846f);}}}localPlayerId='',playerNumToType=[types[_0xfa3985(0x18e)][_0xfa3985(0x1bc)],types[_0xfa3985(0x18e)][_0xfa3985(0x198)],types[_0xfa3985(0x18e)][_0xfa3985(0x1dc)],types[_0xfa3985(0x18e)]['player4']];class Bomb extends Entity{constructor(_0x4ee944,_0x7b4019,_0x37e590){var _0xe9b5fe=_0xfa3985;super(),this[_0xe9b5fe(0x1c6)]=new Sprite(types[_0xe9b5fe(0x18e)]['bomb'],0x40,0x40,0x58,0x58),this[_0xe9b5fe(0x1c6)]['cycleTime']=0x190,this['sprite'][_0xe9b5fe(0x1ff)]=0x3,this[_0xe9b5fe(0x1f9)]=new BombState(_0x4ee944,_0x7b4019,_0x37e590,0x0,0x0,UNIT),this[_0xe9b5fe(0x1b3)]=new Queue(FRAME_RATE);}[_0xfa3985(0x1f8)](_0x4d24e4){var _0x246a9f=_0xfa3985;this[_0x246a9f(0x1c6)][_0x246a9f(0x1f8)](_0x4d24e4),super[_0x246a9f(0x1f8)](_0x4d24e4,(_0x33486c,_0x55a29f,_0x748d52,_0x1de28e)=>{var _0x315737=_0x246a9f;bombMatrix[_0x33486c][_0x55a29f]=0x0,bombMatrix[_0x748d52][_0x1de28e]=this[_0x315737(0x1f9)]['id'];});}}class Wave extends Entity{constructor(_0xe0f9e8,_0x40debf,_0x2def70,_0x390390,_0x1fd0ea){var _0x3155d3=_0xfa3985;super(),this[_0x3155d3(0x1f9)]=new EntityState(_0xe0f9e8,0x0,0x0),this['id']=_0xe0f9e8,this['rowId']=_0x40debf,this[_0x3155d3(0x1a0)]=_0x2def70,this[_0x3155d3(0x1b7)]=_0x390390,this[_0x3155d3(0x203)]=_0x1fd0ea,this[_0x3155d3(0x1f2)]=[],this[_0x3155d3(0x1e3)]=0x0,this[_0x3155d3(0x184)]=FRAME_RATE;var _0x298e4c=new Sprite(types[_0x3155d3(0x18e)][_0x3155d3(0x1d7)],0x3d,0x3d,UNIT,UNIT);_0x298e4c['cycleTime']=0x14,_0x298e4c[_0x3155d3(0x1ff)]=0x2,_0x298e4c['i']=_0x40debf,_0x298e4c['j']=_0x2def70,_0x298e4c[_0x3155d3(0x17a)]=0x3d,_0x298e4c[_0x3155d3(0x1b9)]=0x1f4,_0x298e4c[_0x3155d3(0x195)]=0x2,_0x298e4c['stageCycles']=[_0x298e4c[_0x3155d3(0x1ff)],0x9],_0x298e4c[_0x3155d3(0x199)]=!![],this[_0x3155d3(0x1f2)][_0x3155d3(0x194)](_0x298e4c);var _0x1718ba=[[-0x1,0x0],[0x0,0x1],[0x1,0x0],[0x0,-0x1]];this[_0x3155d3(0x17d)]=_0x1718ba[_0x390390-0x1];}[_0xfa3985(0x1f8)](_0x52bafe){var _0x258cf5=_0xfa3985;this['createTime']++;var _0x1d2c4f=this[_0x258cf5(0x1f2)][_0x258cf5(0x1ad)];if(_0x1d2c4f<this['len']){var _0x41c61d=new Sprite(types[_0x258cf5(0x18e)]['wave'],0x3d,0x3d,UNIT,UNIT);_0x41c61d[_0x258cf5(0x1dd)]=0x14,_0x41c61d[_0x258cf5(0x1ff)]=0x2;var _0xdd858d=this['sprites'][_0x1d2c4f-0x1];_0x41c61d['i']=_0xdd858d['i']+this[_0x258cf5(0x17d)][0x0],_0x41c61d['j']=_0xdd858d['j']+this[_0x258cf5(0x17d)][0x1],_0x41c61d['startY']=0x3d,_0x41c61d[_0x258cf5(0x1b9)]=0x1f4,_0x41c61d[_0x258cf5(0x195)]=0x2,_0x41c61d[_0x258cf5(0x1b1)]=[_0x41c61d[_0x258cf5(0x1ff)],0x9],_0x41c61d[_0x258cf5(0x199)]=!![],this['sprites']['push'](_0x41c61d);}for(var _0x23269a in this['sprites']){var _0x5c09e5=this[_0x258cf5(0x1f2)][_0x23269a];if(_0x5c09e5[_0x258cf5(0x1a6)]==0x1&&_0x5c09e5[_0x258cf5(0x191)]==0x8)continue;this[_0x258cf5(0x1f2)][_0x23269a][_0x258cf5(0x1f8)](_0x52bafe);}this['createTime']==this['ttl']&&delete wavesClient[this['id']];}[_0xfa3985(0x1a4)](_0x5d68db){var _0x4e2e7d=_0xfa3985;for(var _0x39dc90 in this[_0x4e2e7d(0x1f2)]){var _0x2b8638=this[_0x4e2e7d(0x1f2)][_0x39dc90],_0x1aa3e5=_0x2b8638['j']*UNIT+(UNIT>>0x1)-(_0x2b8638[_0x4e2e7d(0x1b2)]>>0x1),_0x34ccfd=_0x2b8638['i']*UNIT+(UNIT>>0x1)-(_0x2b8638[_0x4e2e7d(0x1da)]>>0x1),_0x5dc345=[[_0x1aa3e5,_0x34ccfd],[_0x1aa3e5,_0x34ccfd+_0x2b8638['sizeDrawY']],[_0x1aa3e5,_0x34ccfd],[_0x1aa3e5+_0x2b8638['sizeDrawX'],_0x34ccfd],[_0x1aa3e5+_0x2b8638[_0x4e2e7d(0x1b2)],_0x34ccfd+_0x2b8638['sizeDrawY']]],_0x4cc9ed=[[0x0*Math['PI']],[0x10e*Math['PI']/0xb4],[0x0*Math['PI']/0xb4],[0x5a*Math['PI']/0xb4],[0xb4*Math['PI']/0xb4]];ctx[_0x4e2e7d(0x196)](_0x5dc345[this[_0x4e2e7d(0x1b7)]][0x0],_0x5dc345[this[_0x4e2e7d(0x1b7)]][0x1]),ctx[_0x4e2e7d(0x1a9)](_0x4cc9ed[this[_0x4e2e7d(0x1b7)]]),_0x2b8638[_0x4e2e7d(0x201)](_0x5d68db,0x0,0x0,undefined,_0x2b8638[_0x4e2e7d(0x17a)]),ctx['rotate'](-_0x4cc9ed[this['dir']]),ctx[_0x4e2e7d(0x196)](-_0x5dc345[this[_0x4e2e7d(0x1b7)]][0x0],-_0x5dc345[this[_0x4e2e7d(0x1b7)]][0x1]);}}}function _0x4875(){var _0x2cd398=['box','sizeY','dir','left','stageTime','59195JrZhdY','pngMap','player','canvas','1690812YaUgfA','currStageTime','aid','wave.png','box.png','space','key','spacePressed','sprite','char1.png','stone.png','down','pauseSnd','explode','peek','sizeDrawy','type','currentBombNumber','66orKZRL','2585056dBlXtN','144477qOGVTT','move','player4','block.png','313061xbsBfi','wave','bomb','exp.wav','sizeDrawY','emit','player3','cycleTime','iterate','put_bomb','44AaJoys','volume','pngNum','createTime','bg.ogg','stone','keydown','onload','bomb.png','innerHTML','new_player','down.png','30nACROA','pickup_loot','addEventListener','shift','sizeX','keyCode','sprites','loadPngs','sndMap','maxBombNumber','seqId','resident','update','state','playerNum','getContext','getPng','delta','playSnd','maxCycle','currTime','renderWith','opcode','len','currentTime','loadSnds','assign','startY','loop','resident.m4a','direction','height','undefined','width','forEach','position','toString','ttl','downed','startX','applyInput','downPlayer','player_downed','keys','sea.mp3','getElementById','block','entity','updateDir','peekSecond','currCycle','ship','justPick','push','maxStage','translate','loot','player2','oneTime','src','absolute','94kTDiXd','speed','3063TLsxFk','662430lfIsJu','colId','right','revivePlayer','rowId','render','justPut','currStage','frameCtr','ws://node-pop.herokuapp.com','rotate','pngNow','lay.wav','score','length','onReady','sound','frameVector','stageCycles','sizeDrawX','buffer','style'];_0x4875=function(){return _0x2cd398;};return _0x4875();}var ctx,score;validKeys={},validKeys[types['key']['up']]=0x1,validKeys[types['key']['right']]=0x1,validKeys[types[_0xfa3985(0x1c4)][_0xfa3985(0x1c9)]]=0x1,validKeys[types[_0xfa3985(0x1c4)][_0xfa3985(0x1b8)]]=0x1,validKeys[types['key'][_0xfa3985(0x1c3)]]=0x1,keyPressed={};var server;mapToBGM=[types[_0xfa3985(0x1af)][_0xfa3985(0x192)],types[_0xfa3985(0x1af)]['x'],types[_0xfa3985(0x1af)][_0xfa3985(0x1f7)]];function init(){var _0xa08003=_0xfa3985;document[_0xa08003(0x1ee)](_0xa08003(0x1e6),function(_0xf6725f){var _0x389074=_0xa08003;_0xf6725f[_0x389074(0x1f1)]in validKeys&&(keyPressed[_0xf6725f['keyCode']]=!![]);}),document[_0xa08003(0x1ee)]('keyup',function(_0x57929a){var _0x584ab2=_0xa08003;_0x57929a[_0x584ab2(0x1f1)]in validKeys&&(keyPressed[_0x57929a[_0x584ab2(0x1f1)]]=![]);}),initGame();var _0x28e089=io(_0xa08003(0x1a8),{'withCredentials':!![]});_0x28e089['on'](_0xa08003(0x202),function(_0x3b9456){msgQueue['push'](_0x3b9456);}),server=_0x28e089;}function setPlayerPosition(_0x4b526f,_0x16e076,_0x1f1848){var _0x109dff=_0xfa3985;_0x4b526f[_0x109dff(0x1f9)]['x']=_0x16e076,_0x4b526f[_0x109dff(0x1f9)]['y']=_0x1f1848,_0x4b526f['state'][_0x109dff(0x1a3)]=getRowID(_0x1f1848),_0x4b526f[_0x109dff(0x1f9)]['colId']=getColID(_0x16e076);}var currentMap=0x0;function handleMessage(_0x50eed8){var _0x25fa43=_0xfa3985;switch(_0x50eed8['o']){case types['opcode'][_0x25fa43(0x1ea)]:localPlayerId=_0x50eed8['id'];case types[_0x25fa43(0x202)]['new_map']:stoneMatrix=clearMatrix();var _0x10018c=maps[_0x50eed8['m']];for(var _0x26e3c4=0x0;_0x26e3c4<MAX_ROW;_0x26e3c4++){for(var _0x29b3ac=0x0;_0x29b3ac<MAX_COL;_0x29b3ac++){_0x10018c[_0x26e3c4][_0x29b3ac]==0x2&&(stoneMatrix[_0x26e3c4][_0x29b3ac]=0x1);}}Resource[_0x25fa43(0x1ca)](mapToBGM[currentMap]),Resource[_0x25fa43(0x1fe)](mapToBGM[_0x50eed8['m']]),currentMap=_0x50eed8['m'];break;case types['opcode'][_0x25fa43(0x1d3)]:for(var _0x2903e6 in players){var _0x3cde96=![];for(var _0x29b3ac in _0x50eed8['p']){_0x3cde96|=_0x2903e6==_0x50eed8['p'][_0x29b3ac]['id'];}!_0x3cde96&&delete players[_0x2903e6];}for(var _0x26e3c4 in _0x50eed8['p']){var _0x54acaa=_0x50eed8['p'][_0x26e3c4],_0x256897=intToPlayerState(_0x54acaa['s']),_0x2903e6=_0x54acaa['id'];!(_0x2903e6 in players)&&(players[_0x2903e6]=new Player(_0x2903e6,_0x256897['x'],_0x256897['y'],UNIT,_0x256897[_0x25fa43(0x1fa)]));var _0x528895=players[_0x2903e6];if(_0x2903e6===localPlayerId){setPlayerPosition(_0x528895,_0x256897['x'],_0x256897['y']);while(!pendingInputs['empty']()){var _0x41979b=pendingInputs['peek']();if(_0x41979b[_0x25fa43(0x1f6)]<=_0x54acaa[_0x25fa43(0x1c0)])pendingInputs[_0x25fa43(0x1ef)]();else break;}_0x528895[_0x25fa43(0x1f9)][_0x25fa43(0x19d)]=_0x256897[_0x25fa43(0x19d)],pendingInputs[_0x25fa43(0x1de)](_0x4f4969=>{var _0x4b3a48=_0x25fa43;_0x528895[_0x4b3a48(0x187)](_0x4f4969);}),_0x256897[_0x25fa43(0x1a5)]&&Resource['playSnd'](types[_0x25fa43(0x1af)][_0x25fa43(0x1df)]),_0x256897[_0x25fa43(0x193)]&&Resource[_0x25fa43(0x1fe)](types[_0x25fa43(0x1af)][_0x25fa43(0x1ed)]);}else _0x528895[_0x25fa43(0x1f9)][_0x25fa43(0x1b7)]=_0x256897[_0x25fa43(0x1b7)],_0x528895[_0x25fa43(0x1b3)][_0x25fa43(0x194)]({'ts':_0x528895[_0x25fa43(0x1a7)],'x':_0x256897['x'],'y':_0x256897['y']});_0x528895[_0x25fa43(0x1f9)][_0x25fa43(0x1ac)]=_0x256897[_0x25fa43(0x1ac)],_0x528895[_0x25fa43(0x1f9)][_0x25fa43(0x1cf)]=_0x256897[_0x25fa43(0x1cf)],_0x528895[_0x25fa43(0x1f9)][_0x25fa43(0x1f5)]=_0x256897['maxBombNumber'],!_0x528895[_0x25fa43(0x1f9)]['downed']&&_0x256897['downed']&&_0x528895[_0x25fa43(0x188)](),_0x528895[_0x25fa43(0x1f9)][_0x25fa43(0x185)]&&!_0x256897[_0x25fa43(0x185)]&&_0x528895[_0x25fa43(0x1a2)]();}lootMatrix=intArrayToMatrix(_0x50eed8['l']),boxMatrix=intArrayToMatrix(_0x50eed8['bo']);var _0x37b0cc=Object[_0x25fa43(0x18a)](wavesClient)[_0x25fa43(0x1ad)],_0x3fc056=![];for(var _0x2903e6 in bombs){var _0x3cde96=![];for(var _0x29b3ac in _0x50eed8['b']){_0x3cde96|=_0x2903e6==_0x50eed8['b'][_0x29b3ac]['id'];}if(!_0x3cde96){_0x3fc056=!![];var _0x4cb43e=bombs[_0x2903e6];bombMatrix[_0x4cb43e[_0x25fa43(0x1f9)]['rowId']][_0x4cb43e[_0x25fa43(0x1f9)]['colId']]=0x0,delete bombs[_0x2903e6];var _0x4a1529=new Wave(_0x37b0cc,_0x4cb43e['state'][_0x25fa43(0x1a3)],_0x4cb43e[_0x25fa43(0x1f9)][_0x25fa43(0x1a0)],0x0,0x0);_0x4a1529[_0x25fa43(0x184)]=0x14,_0x4a1529[_0x25fa43(0x1f2)][0x0][_0x25fa43(0x1dd)]=0x14,_0x4a1529[_0x25fa43(0x1f2)][0x0][_0x25fa43(0x1ff)]=0x3,_0x4a1529[_0x25fa43(0x1f2)][0x0][_0x25fa43(0x17a)]=0x0,_0x4a1529[_0x25fa43(0x1f2)][0x0][_0x25fa43(0x195)]=0x0,_0x4a1529[_0x25fa43(0x1f2)][0x0][_0x25fa43(0x1b2)]=0x48,_0x4a1529[_0x25fa43(0x1f2)][0x0][_0x25fa43(0x1cd)]=0x48,wavesClient[_0x37b0cc++]=_0x4a1529;}}_0x3fc056&&Resource[_0x25fa43(0x1fe)](types[_0x25fa43(0x1af)][_0x25fa43(0x1cb)]);for(var _0x26e3c4 in _0x50eed8['b']){var _0x9aa0fc=_0x50eed8['b'][_0x26e3c4],_0x256897=_0x9aa0fc['s'],_0x2903e6=_0x9aa0fc['id'];!(_0x2903e6 in bombs)?bombs[_0x2903e6]=new Bomb(_0x2903e6,_0x256897>>0xa,_0x256897&0x3ff):bombs[_0x2903e6][_0x25fa43(0x1b3)][_0x25fa43(0x194)]({'ts':bombs[_0x2903e6]['frameCtr'],'x':_0x256897>>0xa,'y':_0x256897&0x3ff});}for(var _0x26e3c4 in _0x50eed8['w']){var _0xdd56ff=_0x50eed8['w'][_0x26e3c4],_0x256897=intToWaveState(_0xdd56ff['s']);wavesClient[_0x37b0cc]=new Wave(_0x37b0cc++,_0x256897[_0x25fa43(0x1a3)],_0x256897[_0x25fa43(0x1a0)],_0x256897[_0x25fa43(0x1b7)],_0x256897[_0x25fa43(0x203)]);}break;}}var block=new Block(0x0,0x0),stone=new Stone(0x0,0x0),box=new Box(0x0,-0x1,-0x1),loot=new Loot(0x0,-0x1,-0x1,0x0);function initGame(){var _0x570099=_0xfa3985,_0x371a36=document[_0x570099(0x18c)](_0x570099(0x1bd));ctx=_0x371a36[_0x570099(0x1fb)]('2d'),_0x371a36[_0x570099(0x180)]=WIDTH,_0x371a36[_0x570099(0x17e)]=HEIGHT,_0x371a36[_0x570099(0x1b4)][_0x570099(0x182)]=_0x570099(0x19b),score=document[_0x570099(0x18c)](_0x570099(0x1ac)),blockMatrix=new Array(MAX_ROW);for(var _0xad045b=0x0;_0xad045b<MAX_ROW;_0xad045b++){blockMatrix[_0xad045b]=new Array(MAX_COL);for(var _0x55910d=0x0;_0x55910d<MAX_COL;_0x55910d++)blockMatrix[_0xad045b][_0x55910d]=getRandomInt(0x5);}boxMatrix=clearMatrix(),stoneMatrix=clearMatrix(),bombMatrix=clearMatrix(),lootMatrix=clearMatrix(),waveMatrix=clearMatrix(),playerMatrix=clearMatrix({});var _0x11ccc2=0x3e8/FRAME_RATE,_0x56db00=function(){var _0x3f75f8=_0x570099;setTimeout(_0x56db00,_0x11ccc2);while(!msgQueue['empty']()){handleMessage(msgQueue[_0x3f75f8(0x1ef)]());}update(_0x11ccc2);for(var _0x519d44 in players){players[_0x519d44][_0x3f75f8(0x1f8)](_0x11ccc2);}for(var _0x519d44 in wavesClient){wavesClient[_0x519d44][_0x3f75f8(0x1f8)](_0x11ccc2);}render(_0x11ccc2);};setTimeout(_0x56db00,_0x11ccc2);}function render(_0x3fe46c){var _0x1db068=_0xfa3985;for(var _0x3636e1=0x0;_0x3636e1<MAX_ROW;_0x3636e1++){for(var _0x4a5427=0x0;_0x4a5427<MAX_COL;_0x4a5427++){block[_0x1db068(0x201)](0x0,_0x4a5427*UNIT,_0x3636e1*UNIT,blockMatrix[_0x3636e1][_0x4a5427]*block['sprite'][_0x1db068(0x1f0)],0x0);}}for(var _0x3636e1 in wavesClient){wavesClient[_0x3636e1][_0x1db068(0x1a4)](_0x3fe46c);}for(var _0x3636e1=0x0;_0x3636e1<MAX_ROW;_0x3636e1++){var _0x48a93a=[];for(var _0x4a5427=0x0;_0x4a5427<MAX_COL;_0x4a5427++){var _0x1c5048=_0x4a5427*UNIT,_0xaa2b60=_0x3636e1*UNIT;boxMatrix[_0x3636e1][_0x4a5427]&&box[_0x1db068(0x1a4)](0x0,_0x1c5048,_0xaa2b60);stoneMatrix[_0x3636e1][_0x4a5427]&&stone['render'](0x0,_0x1c5048,_0xaa2b60);if(bombMatrix[_0x3636e1][_0x4a5427]){var _0x2d37e4=bombs[bombMatrix[_0x3636e1][_0x4a5427]];bombs[bombMatrix[_0x3636e1][_0x4a5427]]['render'](0x0,_0x2d37e4[_0x1db068(0x1f9)]['x']-(UNIT>>0x1),_0x2d37e4['state']['y']-(UNIT>>0x1));}lootMatrix[_0x3636e1][_0x4a5427]&&(_0xaa2b60-=loot[_0x1db068(0x1c6)][_0x1db068(0x1da)]>>0x1,loot[_0x1db068(0x201)](0x0,_0x1c5048,_0xaa2b60,(lootMatrix[_0x3636e1][_0x4a5427]-0x1)*loot[_0x1db068(0x1c6)][_0x1db068(0x1f0)],0x0));for(var _0x951a8a in playerMatrix[_0x3636e1][_0x4a5427]){_0x48a93a['push'](_0x951a8a);}}for(var _0x951a8a in _0x48a93a){var _0x4f88c7=players[_0x48a93a[_0x951a8a]],_0x1c5048=_0x4f88c7['state']['x']-(UNIT>>0x1),_0xaa2b60=_0x4f88c7['state']['y']-(_0x4f88c7[_0x1db068(0x1c6)][_0x1db068(0x1da)]>>0x1);_0x4f88c7[_0x1db068(0x1a4)](_0x3fe46c,_0x1c5048,_0xaa2b60);}}var _0x184015='';for(var _0x3636e1 in players){_0x184015+=players[_0x3636e1][_0x1db068(0x1f9)][_0x1db068(0x1ac)][_0x1db068(0x183)]()+'\x20';}score[_0x1db068(0x1e9)]=_0x184015;}Resource[_0xfa3985(0x205)]([[types[_0xfa3985(0x1af)][_0xfa3985(0x192)],_0xfa3985(0x1e4),0.3,0x1],[types[_0xfa3985(0x1af)][_0xfa3985(0x1f7)],_0xfa3985(0x17c),0.3,0x1],[types['sound']['x'],_0xfa3985(0x18b),0.3,0x1],[types[_0xfa3985(0x1af)][_0xfa3985(0x1df)],_0xfa3985(0x1ab),0x1,0x0],[types['sound']['explode'],_0xfa3985(0x1d9),0x1,0x0],[types['sound'][_0xfa3985(0x1ed)],'loot.wav',0x1,0x0]]),Resource[_0xfa3985(0x1f3)]([[types[_0xfa3985(0x18e)][_0xfa3985(0x1bc)],'char4.png'],[types[_0xfa3985(0x18e)][_0xfa3985(0x198)],'char2.png'],[types[_0xfa3985(0x18e)]['player3'],'char3.png'],[types[_0xfa3985(0x18e)][_0xfa3985(0x1d4)],_0xfa3985(0x1c7)],[types[_0xfa3985(0x18e)][_0xfa3985(0x1d8)],_0xfa3985(0x1e8)],[types[_0xfa3985(0x18e)][_0xfa3985(0x1d7)],_0xfa3985(0x1c1)],[types[_0xfa3985(0x18e)][_0xfa3985(0x18d)],_0xfa3985(0x1d5)],[types['entity'][_0xfa3985(0x1e5)],_0xfa3985(0x1c8)],[types[_0xfa3985(0x18e)][_0xfa3985(0x1b5)],_0xfa3985(0x1c2)],[types[_0xfa3985(0x18e)]['loot'],'loot.png'],[types[_0xfa3985(0x18e)][_0xfa3985(0x189)],_0xfa3985(0x1eb)]],init);
