function _0x2861(){var _0x4f3844=['put_bomb','getContext','playerNum','startY','24xxRCsV','volatile','rotate','oneTime','cycleTime','2077230FlaZqf','downed','applyInput','colId','box.png','stageTime','type','right','sprites','loot.wav','wave.png','resident','ttl','142177iWwhtV','sizeDrawY','13082976IOWpmI','bg.ogg','keyCode','sizeDrawy','sndMap','score','dir','play','maxStage','update','seqId','maxBombNumber','stone.png','sizeY','sprite','sea.mp3','width','innerHTML','canvas','player3','downPlayer','len','currentTime','addEventListener','left','char2.png','undefined','currStage','startX','speed','new_player','pickup_loot','frameCtr','pngNum','keydown','sound','char4.png','keyup','box','empty','loot','entity','wave','style','pngNow','rowId','height','loadSnds','ws://bnbserver.onrender.com','currCycle','space','25083vuqmXz','maxCycle','player4','down','spacePressed','updateDir','revivePlayer','block.png','explode','key','188629PdCTsT','player_downed','player2','translate','forEach','198428jyPFkU','bomb','buffer','playSnd','currTime','currentBombNumber','catch','iterate','stageCycles','createTime','pause','1970910mzcJpS','push','pngMap','peek','currStageTime','justPick','getElementById','src','ship','sizeDrawX','pauseSnd','render','toString','lay.wav','websocket','new_map','state','move','direction','opcode','position','player','loadPngs','stone','length','peekSecond','shift','onReady','bomb.png','block','sizeX','160cVtJjP','frameVector','renderWith','getPng'];_0x2861=function(){return _0x4f3844;};return _0x2861();}function _0x363d(_0x7489cb,_0x5d152e){var _0x2861b7=_0x2861();return _0x363d=function(_0x363d5b,_0x514afd){_0x363d5b=_0x363d5b-0x105;var _0x1ab01c=_0x2861b7[_0x363d5b];return _0x1ab01c;},_0x363d(_0x7489cb,_0x5d152e);}var _0x385949=_0x363d;(function(_0x3261b4,_0x3107d9){var _0x381413=_0x363d,_0x25c2c2=_0x3261b4();while(!![]){try{var _0x39d35a=parseInt(_0x381413(0x185))/0x1+parseInt(_0x381413(0x141))/0x2+-parseInt(_0x381413(0x132))/0x3*(-parseInt(_0x381413(0x173))/0x4)+-parseInt(_0x381413(0x14c))/0x5+-parseInt(_0x381413(0x178))/0x6+parseInt(_0x381413(0x13c))/0x7*(-parseInt(_0x381413(0x16b))/0x8)+parseInt(_0x381413(0x187))/0x9;if(_0x39d35a===_0x3107d9)break;else _0x25c2c2['push'](_0x25c2c2['shift']());}catch(_0x4de1d3){_0x25c2c2['push'](_0x25c2c2['shift']());}}}(_0x2861,0x71be6),inputSeqId=0x0,pendingInputs=new Queue(MAX_QUEUE_SIZE),Resource={},Resource[_0x385949(0x14e)]={},Resource[_0x385949(0x18b)]={},Resource[_0x385949(0x120)]=0x0,Resource[_0x385949(0x12b)]=0x0,Resource[_0x385949(0x167)]=null,Resource[_0x385949(0x12e)]=function(_0x566b08){var _0x5ed534=_0x385949;_0x566b08[_0x5ed534(0x140)](function(_0xa4c4e8){var _0x10f163=_0x5ed534,_0x5c1b07=_0xa4c4e8[0x0],_0x1b150e=_0xa4c4e8[0x1],_0xb3cb82=_0xa4c4e8[0x2],_0x14de0a=_0xa4c4e8[0x3],_0x182428=new Audio(_0x1b150e);_0x182428['volume']=_0xb3cb82,_0x182428['loop']=_0x14de0a,Resource[_0x10f163(0x18b)][_0x5c1b07]=_0x182428;});},Resource[_0x385949(0x162)]=function(_0x21897f,_0xaeac3c){var _0x4904b7=_0x385949;Resource['pngNum']+=_0x21897f[_0x4904b7(0x164)],Resource[_0x4904b7(0x167)]=_0xaeac3c,_0x21897f[_0x4904b7(0x140)](function(_0xf97e59){var _0x218a15=_0x4904b7,_0x4fec5e=_0xf97e59[0x0],_0x248184=_0xf97e59[0x1],_0x3c5fb8=new Image();_0x3c5fb8['onload']=function(){var _0x381881=_0x363d;Resource[_0x381881(0x14e)][_0x4fec5e]=_0x3c5fb8,Resource[_0x381881(0x12b)]++;if(Resource[_0x381881(0x12b)]==Resource[_0x381881(0x120)])Resource[_0x381881(0x167)]();},Resource['pngMap'][_0x4fec5e]=![],_0x3c5fb8[_0x218a15(0x153)]=_0x248184;});},Resource[_0x385949(0x16e)]=function(_0x1066ee){var _0x45733b=_0x385949;return Resource[_0x45733b(0x14e)][_0x1066ee];},Resource[_0x385949(0x144)]=function(_0x4fd14d){var _0x388d04=_0x385949;Resource['sndMap'][_0x4fd14d][_0x388d04(0x115)]=0x0;var _0x13fe5b=Resource[_0x388d04(0x18b)][_0x4fd14d][_0x388d04(0x106)]();_0x13fe5b!=undefined&&_0x13fe5b['then'](_0x2d6f8f=>{})[_0x388d04(0x147)](_0x3e53ed=>{});},Resource[_0x385949(0x156)]=function(_0x89caae){var _0x181512=_0x385949;Resource['sndMap'][_0x89caae][_0x181512(0x14b)](),Resource[_0x181512(0x18b)][_0x89caae]['currentTime']=0x0;});class Sprite{constructor(_0x4416a6,_0x5a300e,_0xd83eaf,_0x87ae20,_0x330d2a){var _0x126ac6=_0x385949;this[_0x126ac6(0x11b)]=0x0,this['startY']=0x0,this[_0x126ac6(0x16a)]=_0x5a300e,this[_0x126ac6(0x10c)]=_0xd83eaf,this[_0x126ac6(0x155)]=_0x87ae20,this[_0x126ac6(0x186)]=_0x330d2a,this[_0x126ac6(0x177)]=0x0,this['currTime']=0x0,this[_0x126ac6(0x130)]=0x0,this[_0x126ac6(0x133)]=0x0,this['currStageTime']=0x0,this['stageTime']=0x0,this[_0x126ac6(0x11a)]=0x0,this[_0x126ac6(0x107)]=0x0,this[_0x126ac6(0x149)]=[],this[_0x126ac6(0x16c)]=[],this[_0x126ac6(0x17e)]=_0x4416a6,this[_0x126ac6(0x176)]=![];}[_0x385949(0x157)](_0x2ae909,_0x22212c,_0x660e99){var _0x138839=_0x385949;_0x22212c=_0x22212c+(UNIT>>0x1)-(this[_0x138839(0x155)]>>0x1),_0x660e99=_0x660e99+(UNIT>>0x1)-(this[_0x138839(0x186)]>>0x1),this['renderWith'](_0x2ae909,_0x22212c,_0x660e99);}[_0x385949(0x16d)](_0x43f2c7,_0x2a2c10,_0x1992d5,_0x5066e5,_0x3ddae2){var _0x3f173d=_0x385949;if(this['oneTime']&&this[_0x3f173d(0x130)]+0x1==this[_0x3f173d(0x133)]&&this['currStage']+0x1==this['maxStage'])return;ctx['drawImage'](Resource[_0x3f173d(0x16e)](this[_0x3f173d(0x17e)]),typeof _0x5066e5=='undefined'?this[_0x3f173d(0x11b)]:_0x5066e5,typeof _0x3ddae2==_0x3f173d(0x119)?this[_0x3f173d(0x172)]:_0x3ddae2,this['sizeX'],this['sizeY'],_0x2a2c10,_0x1992d5,this['sizeDrawX'],this[_0x3f173d(0x186)]);}[_0x385949(0x137)](_0x2ff2af){var _0x9b1f70=_0x385949;this[_0x9b1f70(0x16c)][_0x9b1f70(0x164)]&&(this[_0x9b1f70(0x172)]=this[_0x9b1f70(0x10c)]*this[_0x9b1f70(0x16c)][_0x2ff2af]);}[_0x385949(0x108)](_0x58083f){var _0x5d0f7c=_0x385949;this[_0x5d0f7c(0x145)]+=_0x58083f,this['currStageTime']+=_0x58083f,this[_0x5d0f7c(0x145)]>=this[_0x5d0f7c(0x177)]&&(this[_0x5d0f7c(0x145)]=0x0,this[_0x5d0f7c(0x130)]=(this[_0x5d0f7c(0x130)]+0x1)%this[_0x5d0f7c(0x133)],this[_0x5d0f7c(0x11b)]=this['sizeX']*this[_0x5d0f7c(0x130)]),this[_0x5d0f7c(0x107)]&&this[_0x5d0f7c(0x150)]>=this[_0x5d0f7c(0x17d)]&&(this[_0x5d0f7c(0x150)]=0x0,this[_0x5d0f7c(0x145)]=0x0,this[_0x5d0f7c(0x130)]=0x0,this[_0x5d0f7c(0x11a)]=(this[_0x5d0f7c(0x11a)]+0x1)%this[_0x5d0f7c(0x107)],this[_0x5d0f7c(0x133)]=this['stageCycles'][this['currStage']],this[_0x5d0f7c(0x172)]+=this[_0x5d0f7c(0x172)]);}}class Entity{constructor(){var _0x9e9af6=_0x385949;this[_0x9e9af6(0x10d)]=null,this['state']=null,this[_0x9e9af6(0x11f)]=0x0,this['buffer']=new Queue(FRAME_RATE);}['render'](_0x295e70,_0xce3c82,_0x365ca7){this['sprite']['render'](_0x295e70,_0xce3c82,_0x365ca7);}[_0x385949(0x16d)](_0x47d0fc,_0x5c45f8,_0x38f6bc,_0x21dd27,_0x1e8d4b){var _0xbe941=_0x385949;this[_0xbe941(0x10d)][_0xbe941(0x16d)](_0x47d0fc,_0x5c45f8,_0x38f6bc,_0x21dd27,_0x1e8d4b);}['update'](_0x3490f9,_0x1d3d45){var _0x37736d=_0x385949;this['sprite'][_0x37736d(0x108)](_0x3490f9);typeof _0x1d3d45==_0x37736d(0x119)&&this[_0x37736d(0x15c)]&&this[_0x37736d(0x15c)][_0x37736d(0x108)](_0x3490f9);var _0x29fc73=this[_0x37736d(0x11f)]++-FRAME_RATE/SERVER_FRAME;while(this[_0x37736d(0x143)]['length']()>=0x2&&this['buffer'][_0x37736d(0x165)]()['ts']<=_0x29fc73){this[_0x37736d(0x143)][_0x37736d(0x166)]();}if(this[_0x37736d(0x143)][_0x37736d(0x164)]()>=0x2){var _0xee8faa=this[_0x37736d(0x143)][_0x37736d(0x14f)](),_0x5256f0=this[_0x37736d(0x143)][_0x37736d(0x165)]();if(_0xee8faa['ts']<=_0x29fc73&&_0x29fc73<=_0x5256f0['ts']){var _0x2dbd39=_0xee8faa['x'],_0x1250c2=_0x5256f0['x'],_0x1a9653=_0xee8faa['y'],_0x161e83=_0x5256f0['y'],_0x4d8574=_0xee8faa['ts'],_0x343cd2=_0x5256f0['ts'];this[_0x37736d(0x15c)]['x']=_0x2dbd39+(_0x1250c2-_0x2dbd39)*(_0x29fc73-_0x4d8574)/(_0x343cd2-_0x4d8574),this[_0x37736d(0x15c)]['y']=_0x1a9653+(_0x161e83-_0x1a9653)*(_0x29fc73-_0x4d8574)/(_0x343cd2-_0x4d8574);var _0x906932=this['state']['rowId'],_0x22e6dd=this[_0x37736d(0x15c)][_0x37736d(0x17b)];this['state'][_0x37736d(0x12c)]=getRowID(this[_0x37736d(0x15c)]['y']),this['state'][_0x37736d(0x17b)]=getColID(this[_0x37736d(0x15c)]['x']),typeof _0x1d3d45!='undefined'&&_0x1d3d45(_0x906932,_0x22e6dd,this[_0x37736d(0x15c)][_0x37736d(0x12c)],this[_0x37736d(0x15c)][_0x37736d(0x17b)]);}}}}class Block extends Entity{constructor(_0x3f927a,_0x2dc8f1){var _0x2d3e70=_0x385949;super(),this[_0x2d3e70(0x10d)]=new Sprite(types['entity'][_0x2d3e70(0x169)],UNIT,UNIT,UNIT,UNIT),this[_0x2d3e70(0x10d)][_0x2d3e70(0x177)]=-0x1,this[_0x2d3e70(0x10d)][_0x2d3e70(0x133)]=0x1;}}var blockMatrix;class Stone extends Entity{constructor(_0x315b7e,_0x7ee213){var _0x26f8e4=_0x385949;super(),this[_0x26f8e4(0x10d)]=new Sprite(types[_0x26f8e4(0x128)]['stone'],0x40,0x4f,UNIT,UNIT*1.23),this['sprite']['cycleTime']=-0x1,this['sprite']['maxCycle']=0x1;}}class Box extends Entity{constructor(_0x3c2009,_0x35dfaa,_0x5f2807){var _0x573b01=_0x385949;super(),this['state']=new BoxState(_0x3c2009,_0x35dfaa,_0x5f2807),this[_0x573b01(0x10d)]=new Sprite(types[_0x573b01(0x128)][_0x573b01(0x125)],0x40,0x4f,UNIT,UNIT*1.23),this[_0x573b01(0x10d)][_0x573b01(0x177)]=-0x1,this['sprite']['maxCycle']=0x1;}}class Loot extends Entity{constructor(_0x14b72d,_0x1ca9b6,_0x51927f,_0x4e9608){var _0x42ac87=_0x385949;super(),this[_0x42ac87(0x15c)]=new EntityState(_0x14b72d,_0x1ca9b6,_0x51927f),this[_0x42ac87(0x10d)]=new Sprite(types[_0x42ac87(0x128)][_0x42ac87(0x127)],0x20,0x30,UNIT,UNIT*1.5),this[_0x42ac87(0x10d)]['cycleTime']=INFINITE,this[_0x42ac87(0x10d)][_0x42ac87(0x133)]=0x1;}}loots={};class Player extends Entity{constructor(_0x28f1bf,_0x2445bd,_0x2af0a1,_0x54ff0c,_0x2d4ae2){var _0x422be2=_0x385949;super(),this['state']=new PlayerState(_0x28f1bf,_0x2445bd,_0x2af0a1,_0x54ff0c,_0x2d4ae2),this[_0x422be2(0x10d)]=new Sprite(playerNumToType[_0x2d4ae2],0x60,0x76,0x60,0x76),this[_0x422be2(0x10d)][_0x422be2(0x133)]=0x4,this[_0x422be2(0x10d)][_0x422be2(0x16c)]=[0x0,0x1,0x2,0x0,0x3],this[_0x422be2(0x10d)][_0x422be2(0x177)]=0xaa,this[_0x422be2(0x15c)][_0x422be2(0x105)]=types['dir']['down'],this['spacePressed']=![];}[_0x385949(0x113)](){var _0x1d5a3c=_0x385949;this[_0x1d5a3c(0x15c)]['downPlayer'](),this[_0x1d5a3c(0x10d)]=new Sprite(types[_0x1d5a3c(0x128)][_0x1d5a3c(0x13d)],0x4b,0x52,0x60,0x76),this[_0x1d5a3c(0x10d)][_0x1d5a3c(0x177)]=0xc8,this[_0x1d5a3c(0x10d)]['maxCycle']=0x4;}[_0x385949(0x138)](){var _0x209f31=_0x385949;this['state']['revivePlayer'](),this['sprite']=new Sprite(playerNumToType[this[_0x209f31(0x15c)][_0x209f31(0x171)]],0x60,0x76,0x60,0x76),this[_0x209f31(0x10d)][_0x209f31(0x16c)]=[0x0,0x1,0x2,0x0,0x3],this[_0x209f31(0x10d)][_0x209f31(0x177)]=0xaa,this[_0x209f31(0x10d)][_0x209f31(0x133)]=0x4;}[_0x385949(0x17a)](_0x5861b2){var _0x1eb0b0=_0x385949;this[_0x1eb0b0(0x15c)][_0x1eb0b0(0x17a)](_0x5861b2,![]);}['update'](_0x49c5a3){var _0x46b3b5=_0x385949;super['update'](_0x49c5a3),this[_0x46b3b5(0x10d)][_0x46b3b5(0x137)](this[_0x46b3b5(0x15c)][_0x46b3b5(0x105)]);if(this[_0x46b3b5(0x15c)]['id']!=localPlayerId)return;var _0x56e104={};if(keyPressed[types[_0x46b3b5(0x13b)]['up']])_0x56e104[_0x46b3b5(0x13b)]=types[_0x46b3b5(0x13b)]['up']<<0x1;else{if(keyPressed[types[_0x46b3b5(0x13b)][_0x46b3b5(0x17f)]])_0x56e104['key']=types['key'][_0x46b3b5(0x17f)]<<0x1;else{if(keyPressed[types[_0x46b3b5(0x13b)][_0x46b3b5(0x135)]])_0x56e104[_0x46b3b5(0x13b)]=types['key'][_0x46b3b5(0x135)]<<0x1;else keyPressed[types[_0x46b3b5(0x13b)][_0x46b3b5(0x117)]]&&(_0x56e104[_0x46b3b5(0x13b)]=types[_0x46b3b5(0x13b)]['left']<<0x1);}}var _0x470cc5=!this[_0x46b3b5(0x136)]&&keyPressed[types[_0x46b3b5(0x13b)][_0x46b3b5(0x131)]];this['spacePressed']=keyPressed[types[_0x46b3b5(0x13b)]['space']];!this['state'][_0x46b3b5(0x179)]&&_0x470cc5&&(_0x56e104[_0x46b3b5(0x13b)]=_0x46b3b5(0x13b)in _0x56e104?_0x56e104[_0x46b3b5(0x13b)]|0x1:0x1);if(_0x46b3b5(0x13b)in _0x56e104){_0x56e104[_0x46b3b5(0x109)]=inputSeqId++,server[_0x46b3b5(0x174)]['emit'](_0x46b3b5(0x15f),{'o':types['opcode'][_0x46b3b5(0x15d)],'i':_0x56e104});var _0x441ecc=Object['assign']({},_0x56e104);_0x441ecc['delta']=_0x49c5a3,this[_0x46b3b5(0x17a)](_0x441ecc),pendingInputs[_0x46b3b5(0x14d)](_0x441ecc);}}}localPlayerId='',playerNumToType=[types[_0x385949(0x128)][_0x385949(0x161)],types['entity'][_0x385949(0x13e)],types['entity'][_0x385949(0x112)],types['entity'][_0x385949(0x134)]];class Bomb extends Entity{constructor(_0x410338,_0x20f276,_0x5c6ba3){var _0x3dc2a9=_0x385949;super(),this[_0x3dc2a9(0x10d)]=new Sprite(types[_0x3dc2a9(0x128)][_0x3dc2a9(0x142)],0x40,0x40,0x58,0x58),this['sprite'][_0x3dc2a9(0x177)]=0x190,this[_0x3dc2a9(0x10d)][_0x3dc2a9(0x133)]=0x3,this[_0x3dc2a9(0x15c)]=new BombState(_0x410338,_0x20f276,_0x5c6ba3,0x0,0x0,UNIT),this[_0x3dc2a9(0x143)]=new Queue(FRAME_RATE);}[_0x385949(0x108)](_0x37af0e){var _0x1f9206=_0x385949;this[_0x1f9206(0x10d)][_0x1f9206(0x108)](_0x37af0e),super[_0x1f9206(0x108)](_0x37af0e,(_0x542603,_0x3a05c4,_0x3f2197,_0x59b57f)=>{var _0x38f72d=_0x1f9206;bombMatrix[_0x542603][_0x3a05c4]=0x0,bombMatrix[_0x3f2197][_0x59b57f]=this[_0x38f72d(0x15c)]['id'];});}}class Wave extends Entity{constructor(_0x5c81ad,_0x1d4795,_0x23381f,_0xdbd3d6,_0x3974c8){var _0x1b446f=_0x385949;super(),this[_0x1b446f(0x15c)]=new EntityState(_0x5c81ad,0x0,0x0),this['id']=_0x5c81ad,this[_0x1b446f(0x12c)]=_0x1d4795,this['colId']=_0x23381f,this[_0x1b446f(0x105)]=_0xdbd3d6,this[_0x1b446f(0x114)]=_0x3974c8,this['sprites']=[],this[_0x1b446f(0x14a)]=0x0,this[_0x1b446f(0x184)]=FRAME_RATE;var _0x44e18e=new Sprite(types[_0x1b446f(0x128)]['wave'],0x3d,0x3d,UNIT,UNIT);_0x44e18e[_0x1b446f(0x177)]=0x14,_0x44e18e[_0x1b446f(0x133)]=0x2,_0x44e18e['i']=_0x1d4795,_0x44e18e['j']=_0x23381f,_0x44e18e[_0x1b446f(0x172)]=0x3d,_0x44e18e[_0x1b446f(0x17d)]=0x1f4,_0x44e18e[_0x1b446f(0x107)]=0x2,_0x44e18e[_0x1b446f(0x149)]=[_0x44e18e[_0x1b446f(0x133)],0x9],_0x44e18e[_0x1b446f(0x176)]=!![],this['sprites'][_0x1b446f(0x14d)](_0x44e18e);var _0x2aa8ae=[[-0x1,0x0],[0x0,0x1],[0x1,0x0],[0x0,-0x1]];this[_0x1b446f(0x15e)]=_0x2aa8ae[_0xdbd3d6-0x1];}[_0x385949(0x108)](_0x318b99){var _0x21458f=_0x385949;this[_0x21458f(0x14a)]++;var _0x180d4e=this['sprites'][_0x21458f(0x164)];if(_0x180d4e<this[_0x21458f(0x114)]){var _0x1d38c7=new Sprite(types[_0x21458f(0x128)][_0x21458f(0x129)],0x3d,0x3d,UNIT,UNIT);_0x1d38c7[_0x21458f(0x177)]=0x14,_0x1d38c7[_0x21458f(0x133)]=0x2;var _0x4cbfa7=this[_0x21458f(0x180)][_0x180d4e-0x1];_0x1d38c7['i']=_0x4cbfa7['i']+this[_0x21458f(0x15e)][0x0],_0x1d38c7['j']=_0x4cbfa7['j']+this[_0x21458f(0x15e)][0x1],_0x1d38c7[_0x21458f(0x172)]=0x3d,_0x1d38c7[_0x21458f(0x17d)]=0x1f4,_0x1d38c7[_0x21458f(0x107)]=0x2,_0x1d38c7[_0x21458f(0x149)]=[_0x1d38c7[_0x21458f(0x133)],0x9],_0x1d38c7['oneTime']=!![],this[_0x21458f(0x180)][_0x21458f(0x14d)](_0x1d38c7);}for(var _0x1e6b53 in this[_0x21458f(0x180)]){var _0x3dc144=this[_0x21458f(0x180)][_0x1e6b53];if(_0x3dc144['currStage']==0x1&&_0x3dc144[_0x21458f(0x130)]==0x8)continue;this[_0x21458f(0x180)][_0x1e6b53][_0x21458f(0x108)](_0x318b99);}this['createTime']==this[_0x21458f(0x184)]&&delete wavesClient[this['id']];}['render'](_0x26d83b){var _0x6f8f85=_0x385949;for(var _0x33b32a in this['sprites']){var _0x4afb98=this['sprites'][_0x33b32a],_0x539767=_0x4afb98['j']*UNIT+(UNIT>>0x1)-(_0x4afb98['sizeDrawX']>>0x1),_0x3ca9ae=_0x4afb98['i']*UNIT+(UNIT>>0x1)-(_0x4afb98[_0x6f8f85(0x186)]>>0x1),_0x51906a=[[_0x539767,_0x3ca9ae],[_0x539767,_0x3ca9ae+_0x4afb98[_0x6f8f85(0x186)]],[_0x539767,_0x3ca9ae],[_0x539767+_0x4afb98[_0x6f8f85(0x155)],_0x3ca9ae],[_0x539767+_0x4afb98['sizeDrawX'],_0x3ca9ae+_0x4afb98[_0x6f8f85(0x186)]]],_0x1fde9c=[[0x0*Math['PI']],[0x10e*Math['PI']/0xb4],[0x0*Math['PI']/0xb4],[0x5a*Math['PI']/0xb4],[0xb4*Math['PI']/0xb4]];ctx[_0x6f8f85(0x13f)](_0x51906a[this[_0x6f8f85(0x105)]][0x0],_0x51906a[this[_0x6f8f85(0x105)]][0x1]),ctx[_0x6f8f85(0x175)](_0x1fde9c[this['dir']]),_0x4afb98['renderWith'](_0x26d83b,0x0,0x0,undefined,_0x4afb98[_0x6f8f85(0x172)]),ctx[_0x6f8f85(0x175)](-_0x1fde9c[this[_0x6f8f85(0x105)]]),ctx[_0x6f8f85(0x13f)](-_0x51906a[this['dir']][0x0],-_0x51906a[this[_0x6f8f85(0x105)]][0x1]);}}}var ctx,score;validKeys={},validKeys[types[_0x385949(0x13b)]['up']]=0x1,validKeys[types[_0x385949(0x13b)]['right']]=0x1,validKeys[types['key'][_0x385949(0x135)]]=0x1,validKeys[types[_0x385949(0x13b)][_0x385949(0x117)]]=0x1,validKeys[types[_0x385949(0x13b)]['space']]=0x1,keyPressed={};var server;mapToBGM=[types[_0x385949(0x122)][_0x385949(0x154)],types[_0x385949(0x122)]['x'],types[_0x385949(0x122)][_0x385949(0x183)]];function init(){var _0x4156f4=_0x385949;document[_0x4156f4(0x116)](_0x4156f4(0x121),function(_0x1dfa24){var _0x2f5342=_0x4156f4;_0x1dfa24[_0x2f5342(0x189)]in validKeys&&(keyPressed[_0x1dfa24[_0x2f5342(0x189)]]=!![]);}),document[_0x4156f4(0x116)](_0x4156f4(0x124),function(_0x44eda0){var _0x2d3576=_0x4156f4;_0x44eda0[_0x2d3576(0x189)]in validKeys&&(keyPressed[_0x44eda0[_0x2d3576(0x189)]]=![]);}),initGame();var _0x19535a=io(_0x4156f4(0x12f),{'withCredentials':!![],'transports':[_0x4156f4(0x15a)]});_0x19535a['on'](_0x4156f4(0x15f),function(_0x29769c){var _0x2cdaf4=_0x4156f4;msgQueue[_0x2cdaf4(0x14d)](_0x29769c);}),server=_0x19535a;}function setPlayerPosition(_0x40a954,_0x3c9d2f,_0x1c5806){var _0x485b6f=_0x385949;_0x40a954['state']['x']=_0x3c9d2f,_0x40a954[_0x485b6f(0x15c)]['y']=_0x1c5806,_0x40a954[_0x485b6f(0x15c)][_0x485b6f(0x12c)]=getRowID(_0x1c5806),_0x40a954['state']['colId']=getColID(_0x3c9d2f);}var currentMap=0x0;function handleMessage(_0x27767f){var _0x519f5c=_0x385949;switch(_0x27767f['o']){case types[_0x519f5c(0x15f)][_0x519f5c(0x11d)]:localPlayerId=_0x27767f['id'];case types[_0x519f5c(0x15f)][_0x519f5c(0x15b)]:stoneMatrix=clearMatrix();var _0x5e5dba=maps[_0x27767f['m']];for(var _0x1598ea=0x0;_0x1598ea<MAX_ROW;_0x1598ea++){for(var _0x4bc7ff=0x0;_0x4bc7ff<MAX_COL;_0x4bc7ff++){_0x5e5dba[_0x1598ea][_0x4bc7ff]==0x2&&(stoneMatrix[_0x1598ea][_0x4bc7ff]=0x1);}}Resource[_0x519f5c(0x156)](mapToBGM[currentMap]),Resource[_0x519f5c(0x144)](mapToBGM[_0x27767f['m']]),currentMap=_0x27767f['m'];break;case types['opcode']['move']:for(var _0x1d4362 in players){var _0x749836=![];for(var _0x4bc7ff in _0x27767f['p']){_0x749836|=_0x1d4362==_0x27767f['p'][_0x4bc7ff]['id'];}!_0x749836&&delete players[_0x1d4362];}for(var _0x1598ea in _0x27767f['p']){var _0xf87ef8=_0x27767f['p'][_0x1598ea],_0x3c81c4=intToPlayerState(_0xf87ef8['s']),_0x1d4362=_0xf87ef8['id'];!(_0x1d4362 in players)&&(players[_0x1d4362]=new Player(_0x1d4362,_0x3c81c4['x'],_0x3c81c4['y'],UNIT,_0x3c81c4[_0x519f5c(0x171)]));var _0xa03a23=players[_0x1d4362];if(_0x1d4362===localPlayerId){setPlayerPosition(_0xa03a23,_0x3c81c4['x'],_0x3c81c4['y']);while(!pendingInputs['empty']()){var _0x20989a=pendingInputs[_0x519f5c(0x14f)]();if(_0x20989a['seqId']<=_0xf87ef8['aid'])pendingInputs[_0x519f5c(0x166)]();else break;}_0xa03a23[_0x519f5c(0x15c)][_0x519f5c(0x11c)]=_0x3c81c4[_0x519f5c(0x11c)],pendingInputs[_0x519f5c(0x148)](_0x5080c0=>{var _0x3db839=_0x519f5c;_0xa03a23[_0x3db839(0x17a)](_0x5080c0);}),_0x3c81c4['justPut']&&Resource[_0x519f5c(0x144)](types['sound'][_0x519f5c(0x16f)]),_0x3c81c4[_0x519f5c(0x151)]&&Resource['playSnd'](types[_0x519f5c(0x122)]['pickup_loot']);}else _0xa03a23[_0x519f5c(0x15c)][_0x519f5c(0x105)]=_0x3c81c4[_0x519f5c(0x105)],_0xa03a23[_0x519f5c(0x143)][_0x519f5c(0x14d)]({'ts':_0xa03a23['frameCtr'],'x':_0x3c81c4['x'],'y':_0x3c81c4['y']});_0xa03a23[_0x519f5c(0x15c)][_0x519f5c(0x18c)]=_0x3c81c4[_0x519f5c(0x18c)],_0xa03a23['state'][_0x519f5c(0x146)]=_0x3c81c4[_0x519f5c(0x146)],_0xa03a23[_0x519f5c(0x15c)]['maxBombNumber']=_0x3c81c4[_0x519f5c(0x10a)],!_0xa03a23[_0x519f5c(0x15c)]['downed']&&_0x3c81c4['downed']&&_0xa03a23['downPlayer'](),_0xa03a23[_0x519f5c(0x15c)][_0x519f5c(0x179)]&&!_0x3c81c4['downed']&&_0xa03a23[_0x519f5c(0x138)]();}lootMatrix=intArrayToMatrix(_0x27767f['l']),boxMatrix=intArrayToMatrix(_0x27767f['bo']);var _0xf8b48d=Object['keys'](wavesClient)[_0x519f5c(0x164)],_0xf4df85=![];for(var _0x1d4362 in bombs){var _0x749836=![];for(var _0x4bc7ff in _0x27767f['b']){_0x749836|=_0x1d4362==_0x27767f['b'][_0x4bc7ff]['id'];}if(!_0x749836){_0xf4df85=!![];var _0x52a11c=bombs[_0x1d4362];bombMatrix[_0x52a11c[_0x519f5c(0x15c)][_0x519f5c(0x12c)]][_0x52a11c[_0x519f5c(0x15c)][_0x519f5c(0x17b)]]=0x0,delete bombs[_0x1d4362];var _0x58b7e3=new Wave(_0xf8b48d,_0x52a11c[_0x519f5c(0x15c)][_0x519f5c(0x12c)],_0x52a11c[_0x519f5c(0x15c)][_0x519f5c(0x17b)],0x0,0x0);_0x58b7e3[_0x519f5c(0x184)]=0x14,_0x58b7e3[_0x519f5c(0x180)][0x0][_0x519f5c(0x177)]=0x14,_0x58b7e3[_0x519f5c(0x180)][0x0]['maxCycle']=0x3,_0x58b7e3[_0x519f5c(0x180)][0x0]['startY']=0x0,_0x58b7e3['sprites'][0x0][_0x519f5c(0x107)]=0x0,_0x58b7e3['sprites'][0x0][_0x519f5c(0x155)]=0x48,_0x58b7e3[_0x519f5c(0x180)][0x0][_0x519f5c(0x18a)]=0x48,wavesClient[_0xf8b48d++]=_0x58b7e3;}}_0xf4df85&&Resource[_0x519f5c(0x144)](types[_0x519f5c(0x122)]['explode']);for(var _0x1598ea in _0x27767f['b']){var _0x13c563=_0x27767f['b'][_0x1598ea],_0x3c81c4=_0x13c563['s'],_0x1d4362=_0x13c563['id'];!(_0x1d4362 in bombs)?bombs[_0x1d4362]=new Bomb(_0x1d4362,_0x3c81c4>>0xa,_0x3c81c4&0x3ff):bombs[_0x1d4362][_0x519f5c(0x143)][_0x519f5c(0x14d)]({'ts':bombs[_0x1d4362][_0x519f5c(0x11f)],'x':_0x3c81c4>>0xa,'y':_0x3c81c4&0x3ff});}for(var _0x1598ea in _0x27767f['w']){var _0x1c494e=_0x27767f['w'][_0x1598ea],_0x3c81c4=intToWaveState(_0x1c494e['s']);wavesClient[_0xf8b48d]=new Wave(_0xf8b48d++,_0x3c81c4[_0x519f5c(0x12c)],_0x3c81c4[_0x519f5c(0x17b)],_0x3c81c4[_0x519f5c(0x105)],_0x3c81c4['len']);}break;}}var block=new Block(0x0,0x0),stone=new Stone(0x0,0x0),box=new Box(0x0,-0x1,-0x1),loot=new Loot(0x0,-0x1,-0x1,0x0);function initGame(){var _0x1df8fd=_0x385949,_0x290c33=document[_0x1df8fd(0x152)](_0x1df8fd(0x111));ctx=_0x290c33[_0x1df8fd(0x170)]('2d'),_0x290c33[_0x1df8fd(0x10f)]=WIDTH,_0x290c33[_0x1df8fd(0x12d)]=HEIGHT,_0x290c33[_0x1df8fd(0x12a)][_0x1df8fd(0x160)]='absolute',score=document['getElementById']('score'),blockMatrix=new Array(MAX_ROW);for(var _0x428e9=0x0;_0x428e9<MAX_ROW;_0x428e9++){blockMatrix[_0x428e9]=new Array(MAX_COL);for(var _0x40c71e=0x0;_0x40c71e<MAX_COL;_0x40c71e++)blockMatrix[_0x428e9][_0x40c71e]=getRandomInt(0x5);}boxMatrix=clearMatrix(),stoneMatrix=clearMatrix(),bombMatrix=clearMatrix(),lootMatrix=clearMatrix(),waveMatrix=clearMatrix(),playerMatrix=clearMatrix({});var _0x3f9b95=0x3e8/FRAME_RATE,_0x134aa6=function(){var _0x2cc754=_0x1df8fd;setTimeout(_0x134aa6,_0x3f9b95);while(!msgQueue[_0x2cc754(0x126)]()){handleMessage(msgQueue[_0x2cc754(0x166)]());}update(_0x3f9b95);for(var _0x2c4f5b in players){players[_0x2c4f5b][_0x2cc754(0x108)](_0x3f9b95);}for(var _0x2c4f5b in wavesClient){wavesClient[_0x2c4f5b][_0x2cc754(0x108)](_0x3f9b95);}render(_0x3f9b95);};setTimeout(_0x134aa6,_0x3f9b95);}function render(_0x2dfc7d){var _0x52fa09=_0x385949;for(var _0x5f10b7=0x0;_0x5f10b7<MAX_ROW;_0x5f10b7++){for(var _0x2048c3=0x0;_0x2048c3<MAX_COL;_0x2048c3++){block[_0x52fa09(0x16d)](0x0,_0x2048c3*UNIT,_0x5f10b7*UNIT,blockMatrix[_0x5f10b7][_0x2048c3]*block[_0x52fa09(0x10d)][_0x52fa09(0x16a)],0x0);}}for(var _0x5f10b7 in wavesClient){wavesClient[_0x5f10b7][_0x52fa09(0x157)](_0x2dfc7d);}for(var _0x5f10b7=0x0;_0x5f10b7<MAX_ROW;_0x5f10b7++){var _0xa52c9b=[];for(var _0x2048c3=0x0;_0x2048c3<MAX_COL;_0x2048c3++){var _0x4df16e=_0x2048c3*UNIT,_0x275350=_0x5f10b7*UNIT;boxMatrix[_0x5f10b7][_0x2048c3]&&box['render'](0x0,_0x4df16e,_0x275350);stoneMatrix[_0x5f10b7][_0x2048c3]&&stone['render'](0x0,_0x4df16e,_0x275350);if(bombMatrix[_0x5f10b7][_0x2048c3]){var _0x3c3fb9=bombs[bombMatrix[_0x5f10b7][_0x2048c3]];bombs[bombMatrix[_0x5f10b7][_0x2048c3]]['render'](0x0,_0x3c3fb9[_0x52fa09(0x15c)]['x']-(UNIT>>0x1),_0x3c3fb9[_0x52fa09(0x15c)]['y']-(UNIT>>0x1));}lootMatrix[_0x5f10b7][_0x2048c3]&&(_0x275350-=loot[_0x52fa09(0x10d)][_0x52fa09(0x186)]>>0x1,loot[_0x52fa09(0x16d)](0x0,_0x4df16e,_0x275350,(lootMatrix[_0x5f10b7][_0x2048c3]-0x1)*loot['sprite'][_0x52fa09(0x16a)],0x0));for(var _0x5010cf in playerMatrix[_0x5f10b7][_0x2048c3]){_0xa52c9b[_0x52fa09(0x14d)](_0x5010cf);}}for(var _0x5010cf in _0xa52c9b){var _0x518205=players[_0xa52c9b[_0x5010cf]],_0x4df16e=_0x518205[_0x52fa09(0x15c)]['x']-(UNIT>>0x1),_0x275350=_0x518205[_0x52fa09(0x15c)]['y']-(_0x518205[_0x52fa09(0x10d)][_0x52fa09(0x186)]>>0x1);_0x518205[_0x52fa09(0x157)](_0x2dfc7d,_0x4df16e,_0x275350);}}var _0x4b49be='';for(var _0x5f10b7 in players){_0x4b49be+=players[_0x5f10b7][_0x52fa09(0x15c)]['score'][_0x52fa09(0x158)]()+'\x20';}score[_0x52fa09(0x110)]=_0x4b49be;}Resource[_0x385949(0x12e)]([[types['sound'][_0x385949(0x154)],_0x385949(0x188),0.3,0x1],[types[_0x385949(0x122)][_0x385949(0x183)],'resident.m4a',0.3,0x1],[types[_0x385949(0x122)]['x'],_0x385949(0x10e),0.3,0x1],[types[_0x385949(0x122)][_0x385949(0x16f)],_0x385949(0x159),0x1,0x0],[types[_0x385949(0x122)][_0x385949(0x13a)],'exp.wav',0x1,0x0],[types[_0x385949(0x122)][_0x385949(0x11e)],_0x385949(0x181),0x1,0x0]]),Resource[_0x385949(0x162)]([[types[_0x385949(0x128)]['player'],_0x385949(0x123)],[types[_0x385949(0x128)]['player2'],_0x385949(0x118)],[types[_0x385949(0x128)][_0x385949(0x112)],'char3.png'],[types[_0x385949(0x128)][_0x385949(0x134)],'char1.png'],[types[_0x385949(0x128)][_0x385949(0x142)],_0x385949(0x168)],[types[_0x385949(0x128)][_0x385949(0x129)],_0x385949(0x182)],[types[_0x385949(0x128)][_0x385949(0x169)],_0x385949(0x139)],[types[_0x385949(0x128)][_0x385949(0x163)],_0x385949(0x10b)],[types['entity'][_0x385949(0x125)],_0x385949(0x17c)],[types[_0x385949(0x128)]['loot'],'loot.png'],[types['entity'][_0x385949(0x13d)],'down.png']],init);
